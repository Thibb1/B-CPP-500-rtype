\hypertarget{client_2network_2network_8hpp_source}{}\doxysection{network.\+hpp}
\label{client_2network_2network_8hpp_source}\index{client/network/network.hpp@{client/network/network.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include "{}deps.hpp"{}}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}utils.hpp"{}}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <arpa/inet.h>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <array>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <asio.hpp>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <cstring>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <functional>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <future>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <iomanip>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <netinet/in.h>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <poll.h>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <queue>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <random>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include <utility>}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{keyword}{using namespace }std::chrono\_literals;}
\DoxyCodeLine{21 \textcolor{keyword}{using namespace }asio::ip;}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{comment}{// udp client that can send and receive data}}
\DoxyCodeLine{24 \textcolor{keyword}{class }\mbox{\hyperlink{classUdpClient}{UdpClient}} \{}
\DoxyCodeLine{25   \textcolor{keyword}{private}:}
\DoxyCodeLine{26     asio::io\_context \_io\_context;}
\DoxyCodeLine{27     udp::socket \_socket;}
\DoxyCodeLine{28     udp::endpoint \_endpoint;}
\DoxyCodeLine{29     std::array<char, 1024> \_buffer\{\};}
\DoxyCodeLine{30     std::thread \_listener;}
\DoxyCodeLine{31     std::thread \_heartbeat;}
\DoxyCodeLine{32     std::thread \_timeout;}
\DoxyCodeLine{33     std::queue<std::string> \_messages;}
\DoxyCodeLine{34     std::mutex \_mutex;}
\DoxyCodeLine{35     std::condition\_variable \_cv;}
\DoxyCodeLine{36     std::atomic<bool> \_connected;}
\DoxyCodeLine{37     std::chrono::time\_point<std::chrono::system\_clock> \_lastMessage;}
\DoxyCodeLine{38 }
\DoxyCodeLine{39   \textcolor{keyword}{public}:}
\DoxyCodeLine{40     \mbox{\hyperlink{classUdpClient}{UdpClient}}(\textcolor{keyword}{const} std::string \&ip, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} port);}
\DoxyCodeLine{41     \mbox{\hyperlink{classUdpClient_a9e69046802da8ea9e0bf3da874c49e47}{\string~UdpClient}}();}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     \textcolor{comment}{// send a message to the server}}
\DoxyCodeLine{44     \textcolor{keywordtype}{void} \mbox{\hyperlink{classUdpClient_a0a2937134a07dd536711363b270be51b}{send}}(\textcolor{keyword}{const} std::string \&msg);}
\DoxyCodeLine{45 }
\DoxyCodeLine{46     \textcolor{comment}{// receive a message from the server}}
\DoxyCodeLine{47     std::string \mbox{\hyperlink{classUdpClient_a34c2910d055fc3fb84ff8a4ce0a515a1}{receive}}();}
\DoxyCodeLine{48 }
\DoxyCodeLine{49     \textcolor{comment}{// check if there is a message to receive}}
\DoxyCodeLine{50     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classUdpClient_adbbdced0f99e7ab1bdb9b47f1d120f2c}{hasMessage}}();}
\DoxyCodeLine{51 }
\DoxyCodeLine{52     \textcolor{comment}{// check if the client is connected to the server}}
\DoxyCodeLine{53     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classUdpClient_a4a9b223c9245f6f096a5dc0e441831fb}{isConnected}}();}
\DoxyCodeLine{54 }
\DoxyCodeLine{55     \textcolor{comment}{// thread that listens for messages}}
\DoxyCodeLine{56     \textcolor{keywordtype}{void} \mbox{\hyperlink{classUdpClient_a8dcc805b870b635529dcfcd687f02709}{threadListener}}();}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{comment}{// thread that sends a heartbeat to the server}}
\DoxyCodeLine{59     \textcolor{keywordtype}{void} \mbox{\hyperlink{classUdpClient_ae84d5a7bafae753c7e5ccdc2826a2650}{threadHeartbeat}}();}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{comment}{// thread that checks if the server is still connected}}
\DoxyCodeLine{62     \textcolor{keywordtype}{void} \mbox{\hyperlink{classUdpClient_a964c9b14734617891194b12396034c53}{threadTimeout}}();}
\DoxyCodeLine{63 \};}

\end{DoxyCode}
