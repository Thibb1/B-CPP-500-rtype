\hypertarget{tinyobj__loader__c_8h_source}{}\doxysection{tinyobj\+\_\+loader\+\_\+c.\+h}
\label{tinyobj__loader__c_8h_source}\index{build/\_deps/raylib-\/src/src/external/tinyobj\_loader\_c.h@{build/\_deps/raylib-\/src/src/external/tinyobj\_loader\_c.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{   The MIT License (MIT)}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{   Copyright (c) 2016 -\/ 2019 Syoyo Fujita and many contributors.}}
\DoxyCodeLine{5 \textcolor{comment}{}}
\DoxyCodeLine{6 \textcolor{comment}{   Permission is hereby granted, free of charge, to any person obtaining a copy}}
\DoxyCodeLine{7 \textcolor{comment}{   of this software and associated documentation files (the "{}Software"{}), to deal}}
\DoxyCodeLine{8 \textcolor{comment}{   in the Software without restriction, including without limitation the rights}}
\DoxyCodeLine{9 \textcolor{comment}{   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell}}
\DoxyCodeLine{10 \textcolor{comment}{   copies of the Software, and to permit persons to whom the Software is}}
\DoxyCodeLine{11 \textcolor{comment}{   furnished to do so, subject to the following conditions:}}
\DoxyCodeLine{12 \textcolor{comment}{}}
\DoxyCodeLine{13 \textcolor{comment}{   The above copyright notice and this permission notice shall be included in}}
\DoxyCodeLine{14 \textcolor{comment}{   all copies or substantial portions of the Software.}}
\DoxyCodeLine{15 \textcolor{comment}{}}
\DoxyCodeLine{16 \textcolor{comment}{   THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{17 \textcolor{comment}{   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}}
\DoxyCodeLine{18 \textcolor{comment}{   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}}
\DoxyCodeLine{19 \textcolor{comment}{   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}}
\DoxyCodeLine{20 \textcolor{comment}{   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}}
\DoxyCodeLine{21 \textcolor{comment}{   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN}}
\DoxyCodeLine{22 \textcolor{comment}{   THE SOFTWARE.}}
\DoxyCodeLine{23 \textcolor{comment}{   */}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#ifndef TINOBJ\_LOADER\_C\_H\_}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#define TINOBJ\_LOADER\_C\_H\_}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{comment}{/* @todo \{ Remove stddef dependency. unsigned int? \} -\/-\/-\/> RAY: DONE. */}}
\DoxyCodeLine{28 \textcolor{comment}{//\#include <stddef.h>}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{31   \textcolor{keywordtype}{char} *name;}
\DoxyCodeLine{32 }
\DoxyCodeLine{33   \textcolor{keywordtype}{float} ambient[3];}
\DoxyCodeLine{34   \textcolor{keywordtype}{float} diffuse[3];}
\DoxyCodeLine{35   \textcolor{keywordtype}{float} specular[3];}
\DoxyCodeLine{36   \textcolor{keywordtype}{float} transmittance[3];}
\DoxyCodeLine{37   \textcolor{keywordtype}{float} emission[3];}
\DoxyCodeLine{38   \textcolor{keywordtype}{float} shininess;}
\DoxyCodeLine{39   \textcolor{keywordtype}{float} ior;      \textcolor{comment}{/* index of refraction */}}
\DoxyCodeLine{40   \textcolor{keywordtype}{float} dissolve; \textcolor{comment}{/* 1 == opaque; 0 == fully transparent */}}
\DoxyCodeLine{41   \textcolor{comment}{/* illumination model (see http://www.fileformat.info/format/material/) */}}
\DoxyCodeLine{42   \textcolor{keywordtype}{int} illum;}
\DoxyCodeLine{43 }
\DoxyCodeLine{44   \textcolor{keywordtype}{int} pad0;}
\DoxyCodeLine{45 }
\DoxyCodeLine{46   \textcolor{keywordtype}{char} *ambient\_texname;            \textcolor{comment}{/* map\_Ka */}}
\DoxyCodeLine{47   \textcolor{keywordtype}{char} *diffuse\_texname;            \textcolor{comment}{/* map\_Kd */}}
\DoxyCodeLine{48   \textcolor{keywordtype}{char} *specular\_texname;           \textcolor{comment}{/* map\_Ks */}}
\DoxyCodeLine{49   \textcolor{keywordtype}{char} *specular\_highlight\_texname; \textcolor{comment}{/* map\_Ns */}}
\DoxyCodeLine{50   \textcolor{keywordtype}{char} *bump\_texname;               \textcolor{comment}{/* map\_bump, bump */}}
\DoxyCodeLine{51   \textcolor{keywordtype}{char} *displacement\_texname;       \textcolor{comment}{/* disp */}}
\DoxyCodeLine{52   \textcolor{keywordtype}{char} *alpha\_texname;              \textcolor{comment}{/* map\_d */}}
\DoxyCodeLine{53 \} \mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}};}
\DoxyCodeLine{54 }
\DoxyCodeLine{55 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{56   \textcolor{keywordtype}{char} *name; \textcolor{comment}{/* group name or object name. */}}
\DoxyCodeLine{57   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} face\_offset;}
\DoxyCodeLine{58   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} length;}
\DoxyCodeLine{59 \} \mbox{\hyperlink{structtinyobj__shape__t}{tinyobj\_shape\_t}};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{ \textcolor{keywordtype}{int} v\_idx, vt\_idx, vn\_idx; \} \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{64   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_vertices;}
\DoxyCodeLine{65   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_normals;}
\DoxyCodeLine{66   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_texcoords;}
\DoxyCodeLine{67   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_faces;}
\DoxyCodeLine{68   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_face\_num\_verts;}
\DoxyCodeLine{69 }
\DoxyCodeLine{70   \textcolor{keywordtype}{int} pad0;}
\DoxyCodeLine{71 }
\DoxyCodeLine{72   \textcolor{keywordtype}{float} *vertices;}
\DoxyCodeLine{73   \textcolor{keywordtype}{float} *normals;}
\DoxyCodeLine{74   \textcolor{keywordtype}{float} *texcoords;}
\DoxyCodeLine{75   \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} *faces;}
\DoxyCodeLine{76   \textcolor{keywordtype}{int} *face\_num\_verts;}
\DoxyCodeLine{77   \textcolor{keywordtype}{int} *material\_ids;}
\DoxyCodeLine{78 \} \mbox{\hyperlink{structtinyobj__attrib__t}{tinyobj\_attrib\_t}};}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 }
\DoxyCodeLine{81 \textcolor{preprocessor}{\#define TINYOBJ\_FLAG\_TRIANGULATE (1 << 0)}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83 \textcolor{preprocessor}{\#define TINYOBJ\_INVALID\_INDEX (0x80000000)}}
\DoxyCodeLine{84 }
\DoxyCodeLine{85 \textcolor{preprocessor}{\#define TINYOBJ\_SUCCESS (0)}}
\DoxyCodeLine{86 \textcolor{preprocessor}{\#define TINYOBJ\_ERROR\_EMPTY (-\/1)}}
\DoxyCodeLine{87 \textcolor{preprocessor}{\#define TINYOBJ\_ERROR\_INVALID\_PARAMETER (-\/2)}}
\DoxyCodeLine{88 \textcolor{preprocessor}{\#define TINYOBJ\_ERROR\_FILE\_OPERATION (-\/3)}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{comment}{/* Parse wavefront .obj(.obj string data is expanded to linear char array `buf')}}
\DoxyCodeLine{91 \textcolor{comment}{ * flags are combination of TINYOBJ\_FLAG\_***}}
\DoxyCodeLine{92 \textcolor{comment}{ * Returns TINYOBJ\_SUCCESS if things goes well.}}
\DoxyCodeLine{93 \textcolor{comment}{ * Returns TINYOBJ\_ERR\_*** when there is an error.}}
\DoxyCodeLine{94 \textcolor{comment}{ */}}
\DoxyCodeLine{95 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} tinyobj\_parse\_obj(\mbox{\hyperlink{structtinyobj__attrib__t}{tinyobj\_attrib\_t}} *attrib, \mbox{\hyperlink{structtinyobj__shape__t}{tinyobj\_shape\_t}} **shapes,}
\DoxyCodeLine{96                              \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *num\_shapes, \mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} **materials,}
\DoxyCodeLine{97                              \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *num\_materials, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *buf, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len,}
\DoxyCodeLine{98                              \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} flags);}
\DoxyCodeLine{99 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} tinyobj\_parse\_mtl\_file(\mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} **materials\_out,}
\DoxyCodeLine{100                                   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *num\_materials\_out,}
\DoxyCodeLine{101                                   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *filename);}
\DoxyCodeLine{102 }
\DoxyCodeLine{103 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} tinyobj\_attrib\_init(\mbox{\hyperlink{structtinyobj__attrib__t}{tinyobj\_attrib\_t}} *attrib);}
\DoxyCodeLine{104 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} tinyobj\_attrib\_free(\mbox{\hyperlink{structtinyobj__attrib__t}{tinyobj\_attrib\_t}} *attrib);}
\DoxyCodeLine{105 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} tinyobj\_shapes\_free(\mbox{\hyperlink{structtinyobj__shape__t}{tinyobj\_shape\_t}} *shapes, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_shapes);}
\DoxyCodeLine{106 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} tinyobj\_materials\_free(\mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *materials,}
\DoxyCodeLine{107                                    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_materials);}
\DoxyCodeLine{108 }
\DoxyCodeLine{109 \textcolor{preprocessor}{\#ifdef TINYOBJ\_LOADER\_C\_IMPLEMENTATION}}
\DoxyCodeLine{110 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{111 \textcolor{preprocessor}{\#include <assert.h>}}
\DoxyCodeLine{112 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{113 \textcolor{preprocessor}{\#include <errno.h>}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115 \textcolor{preprocessor}{\#if defined(TINYOBJ\_MALLOC) \&\& defined(TINYOBJ\_REALLOC) \&\& defined(TINYOBJ\_CALLOC) \&\& defined(TINYOBJ\_FREE)}}
\DoxyCodeLine{116 \textcolor{comment}{/* ok */}}
\DoxyCodeLine{117 \textcolor{preprocessor}{\#elif !defined(TINYOBJ\_MALLOC) \&\& !defined(TINYOBJ\_REALLOC) \&\& !defined(TINYOBJ\_CALLOC) \&\& !defined(TINYOBJ\_FREE)}}
\DoxyCodeLine{118 \textcolor{comment}{/* ok */}}
\DoxyCodeLine{119 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{120 \textcolor{preprocessor}{\#error "{}Must define all or none of TINYOBJ\_MALLOC, TINYOBJ\_REALLOC, TINYOBJ\_CALLOC and TINYOBJ\_FREE."{}}}
\DoxyCodeLine{121 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{122 }
\DoxyCodeLine{123 \textcolor{preprocessor}{\#ifndef TINYOBJ\_MALLOC}}
\DoxyCodeLine{124 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{125 \textcolor{preprocessor}{\#define TINYOBJ\_MALLOC malloc}}
\DoxyCodeLine{126 \textcolor{preprocessor}{\#define TINYOBJ\_REALLOC realloc}}
\DoxyCodeLine{127 \textcolor{preprocessor}{\#define TINYOBJ\_CALLOC calloc}}
\DoxyCodeLine{128 \textcolor{preprocessor}{\#define TINYOBJ\_FREE free}}
\DoxyCodeLine{129 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 \textcolor{preprocessor}{\#define TINYOBJ\_MAX\_FACES\_PER\_F\_LINE (16)}}
\DoxyCodeLine{132 }
\DoxyCodeLine{133 \textcolor{preprocessor}{\#define IS\_SPACE(x) (((x) == ' ') || ((x) == '\(\backslash\)t'))}}
\DoxyCodeLine{134 \textcolor{preprocessor}{\#define IS\_DIGIT(x) ((unsigned int)((x) -\/ '0') < (unsigned int)(10))}}
\DoxyCodeLine{135 \textcolor{preprocessor}{\#define IS\_NEW\_LINE(x) (((x) == '\(\backslash\)r') || ((x) == '\(\backslash\)n') || ((x) == '\(\backslash\)0'))}}
\DoxyCodeLine{136 }
\DoxyCodeLine{137 \textcolor{keyword}{static} \textcolor{keywordtype}{void} skip\_space(\textcolor{keyword}{const} \textcolor{keywordtype}{char} **token) \{}
\DoxyCodeLine{138   \textcolor{keywordflow}{while} ((*token)[0] == \textcolor{charliteral}{' '} || (*token)[0] == \textcolor{charliteral}{'\(\backslash\)t'}) \{}
\DoxyCodeLine{139     (*token)++;}
\DoxyCodeLine{140   \}}
\DoxyCodeLine{141 \}}
\DoxyCodeLine{142 }
\DoxyCodeLine{143 \textcolor{keyword}{static} \textcolor{keywordtype}{void} skip\_space\_and\_cr(\textcolor{keyword}{const} \textcolor{keywordtype}{char} **token) \{}
\DoxyCodeLine{144   \textcolor{keywordflow}{while} ((*token)[0] == \textcolor{charliteral}{' '} || (*token)[0] == \textcolor{charliteral}{'\(\backslash\)t'} || (*token)[0] == \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{145     (*token)++;}
\DoxyCodeLine{146   \}}
\DoxyCodeLine{147 \}}
\DoxyCodeLine{148 }
\DoxyCodeLine{149 \textcolor{keyword}{static} \textcolor{keywordtype}{int} until\_space(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *token) \{}
\DoxyCodeLine{150   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *p = token;}
\DoxyCodeLine{151   \textcolor{keywordflow}{while} (p[0] != \textcolor{charliteral}{'\(\backslash\)0'} \&\& p[0] != \textcolor{charliteral}{' '} \&\& p[0] != \textcolor{charliteral}{'\(\backslash\)t'} \&\& p[0] != \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{152     p++;}
\DoxyCodeLine{153   \}}
\DoxyCodeLine{154 }
\DoxyCodeLine{155   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})(p -\/ token);}
\DoxyCodeLine{156 \}}
\DoxyCodeLine{157 }
\DoxyCodeLine{158 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} length\_until\_newline(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *token, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n) \{}
\DoxyCodeLine{159   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len = 0;}
\DoxyCodeLine{160 }
\DoxyCodeLine{161   \textcolor{comment}{/* Assume token[n-\/1] = '\(\backslash\)0' */}}
\DoxyCodeLine{162   \textcolor{keywordflow}{for} (len = 0; len < n -\/ 1; len++) \{}
\DoxyCodeLine{163     \textcolor{keywordflow}{if} (token[len] == \textcolor{charliteral}{'\(\backslash\)n'}) \{}
\DoxyCodeLine{164       \textcolor{keywordflow}{break};}
\DoxyCodeLine{165     \}}
\DoxyCodeLine{166     \textcolor{keywordflow}{if} ((token[len] == \textcolor{charliteral}{'\(\backslash\)r'}) \&\& ((len < (n -\/ 2)) \&\& (token[len + 1] != \textcolor{charliteral}{'\(\backslash\)n'}))) \{}
\DoxyCodeLine{167       \textcolor{keywordflow}{break};}
\DoxyCodeLine{168     \}}
\DoxyCodeLine{169   \}}
\DoxyCodeLine{170 }
\DoxyCodeLine{171   \textcolor{keywordflow}{return} len;}
\DoxyCodeLine{172 \}}
\DoxyCodeLine{173 }
\DoxyCodeLine{174 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} length\_until\_line\_feed(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *token, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n) \{}
\DoxyCodeLine{175   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len = 0;}
\DoxyCodeLine{176 }
\DoxyCodeLine{177   \textcolor{comment}{/* Assume token[n-\/1] = '\(\backslash\)0' */}}
\DoxyCodeLine{178   \textcolor{keywordflow}{for} (len = 0; len < n; len++) \{}
\DoxyCodeLine{179     \textcolor{keywordflow}{if} ((token[len] == \textcolor{charliteral}{'\(\backslash\)n'}) || (token[len] == \textcolor{charliteral}{'\(\backslash\)r'})) \{}
\DoxyCodeLine{180       \textcolor{keywordflow}{break};}
\DoxyCodeLine{181     \}}
\DoxyCodeLine{182   \}}
\DoxyCodeLine{183 }
\DoxyCodeLine{184   \textcolor{keywordflow}{return} len;}
\DoxyCodeLine{185 \}}
\DoxyCodeLine{186 }
\DoxyCodeLine{187 \textcolor{comment}{/* http://stackoverflow.com/questions/5710091/how-\/does-\/atoi-\/function-\/in-\/c-\/work}}
\DoxyCodeLine{188 \textcolor{comment}{*/}}
\DoxyCodeLine{189 \textcolor{keyword}{static} \textcolor{keywordtype}{int} my\_atoi(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *c) \{}
\DoxyCodeLine{190   \textcolor{keywordtype}{int} value = 0;}
\DoxyCodeLine{191   \textcolor{keywordtype}{int} sign = 1;}
\DoxyCodeLine{192   \textcolor{keywordflow}{if} (*c == \textcolor{charliteral}{'+'} || *c == \textcolor{charliteral}{'-\/'}) \{}
\DoxyCodeLine{193     \textcolor{keywordflow}{if} (*c == \textcolor{charliteral}{'-\/'}) sign = -\/1;}
\DoxyCodeLine{194     c++;}
\DoxyCodeLine{195   \}}
\DoxyCodeLine{196   \textcolor{keywordflow}{while} (((*c) >= \textcolor{charliteral}{'0'}) \&\& ((*c) <= \textcolor{charliteral}{'9'})) \{ \textcolor{comment}{/* isdigit(*c) */}}
\DoxyCodeLine{197     value *= 10;}
\DoxyCodeLine{198     value += (int)(*c -\/ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{199     c++;}
\DoxyCodeLine{200   \}}
\DoxyCodeLine{201   \textcolor{keywordflow}{return} value * sign;}
\DoxyCodeLine{202 \}}
\DoxyCodeLine{203 }
\DoxyCodeLine{204 \textcolor{comment}{/* Make index zero-\/base, and also support relative index. */}}
\DoxyCodeLine{205 \textcolor{keyword}{static} \textcolor{keywordtype}{int} fixIndex(\textcolor{keywordtype}{int} idx, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n) \{}
\DoxyCodeLine{206   \textcolor{keywordflow}{if} (idx > 0) \textcolor{keywordflow}{return} idx -\/ 1;}
\DoxyCodeLine{207   \textcolor{keywordflow}{if} (idx == 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{208   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})n + idx; \textcolor{comment}{/* negative value = relative */}}
\DoxyCodeLine{209 \}}
\DoxyCodeLine{210 }
\DoxyCodeLine{211 \textcolor{comment}{/* Parse raw triples: i, i/j/k, i//k, i/j */}}
\DoxyCodeLine{212 \textcolor{keyword}{static} \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} parseRawTriple(\textcolor{keyword}{const} \textcolor{keywordtype}{char} **token) \{}
\DoxyCodeLine{213   \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} vi;}
\DoxyCodeLine{214   \textcolor{comment}{/* 0x80000000 = -\/2147483648 = invalid */}}
\DoxyCodeLine{215   vi.v\_idx = (int)(0x80000000);}
\DoxyCodeLine{216   vi.vn\_idx = (int)(0x80000000);}
\DoxyCodeLine{217   vi.vt\_idx = (int)(0x80000000);}
\DoxyCodeLine{218 }
\DoxyCodeLine{219   vi.v\_idx = my\_atoi((*token));}
\DoxyCodeLine{220   \textcolor{keywordflow}{while} ((*token)[0] != \textcolor{charliteral}{'\(\backslash\)0'} \&\& (*token)[0] != \textcolor{charliteral}{'/'} \&\& (*token)[0] != \textcolor{charliteral}{' '} \&\&}
\DoxyCodeLine{221          (*token)[0] != \textcolor{charliteral}{'\(\backslash\)t'} \&\& (*token)[0] != \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{222     (*token)++;}
\DoxyCodeLine{223   \}}
\DoxyCodeLine{224   \textcolor{keywordflow}{if} ((*token)[0] != \textcolor{charliteral}{'/'}) \{}
\DoxyCodeLine{225     \textcolor{keywordflow}{return} vi;}
\DoxyCodeLine{226   \}}
\DoxyCodeLine{227   (*token)++;}
\DoxyCodeLine{228 }
\DoxyCodeLine{229   \textcolor{comment}{/* i//k */}}
\DoxyCodeLine{230   \textcolor{keywordflow}{if} ((*token)[0] == \textcolor{charliteral}{'/'}) \{}
\DoxyCodeLine{231     (*token)++;}
\DoxyCodeLine{232     vi.vn\_idx = my\_atoi((*token));}
\DoxyCodeLine{233     \textcolor{keywordflow}{while} ((*token)[0] != \textcolor{charliteral}{'\(\backslash\)0'} \&\& (*token)[0] != \textcolor{charliteral}{'/'} \&\& (*token)[0] != \textcolor{charliteral}{' '} \&\&}
\DoxyCodeLine{234            (*token)[0] != \textcolor{charliteral}{'\(\backslash\)t'} \&\& (*token)[0] != \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{235       (*token)++;}
\DoxyCodeLine{236     \}}
\DoxyCodeLine{237     \textcolor{keywordflow}{return} vi;}
\DoxyCodeLine{238   \}}
\DoxyCodeLine{239 }
\DoxyCodeLine{240   \textcolor{comment}{/* i/j/k or i/j */}}
\DoxyCodeLine{241   vi.vt\_idx = my\_atoi((*token));}
\DoxyCodeLine{242   \textcolor{keywordflow}{while} ((*token)[0] != \textcolor{charliteral}{'\(\backslash\)0'} \&\& (*token)[0] != \textcolor{charliteral}{'/'} \&\& (*token)[0] != \textcolor{charliteral}{' '} \&\&}
\DoxyCodeLine{243          (*token)[0] != \textcolor{charliteral}{'\(\backslash\)t'} \&\& (*token)[0] != \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{244     (*token)++;}
\DoxyCodeLine{245   \}}
\DoxyCodeLine{246   \textcolor{keywordflow}{if} ((*token)[0] != \textcolor{charliteral}{'/'}) \{}
\DoxyCodeLine{247     \textcolor{keywordflow}{return} vi;}
\DoxyCodeLine{248   \}}
\DoxyCodeLine{249 }
\DoxyCodeLine{250   \textcolor{comment}{/* i/j/k */}}
\DoxyCodeLine{251   (*token)++; \textcolor{comment}{/* skip '/' */}}
\DoxyCodeLine{252   vi.vn\_idx = my\_atoi((*token));}
\DoxyCodeLine{253   \textcolor{keywordflow}{while} ((*token)[0] != \textcolor{charliteral}{'\(\backslash\)0'} \&\& (*token)[0] != \textcolor{charliteral}{'/'} \&\& (*token)[0] != \textcolor{charliteral}{' '} \&\&}
\DoxyCodeLine{254          (*token)[0] != \textcolor{charliteral}{'\(\backslash\)t'} \&\& (*token)[0] != \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{255     (*token)++;}
\DoxyCodeLine{256   \}}
\DoxyCodeLine{257   \textcolor{keywordflow}{return} vi;}
\DoxyCodeLine{258 \}}
\DoxyCodeLine{259 }
\DoxyCodeLine{260 \textcolor{keyword}{static} \textcolor{keywordtype}{int} parseInt(\textcolor{keyword}{const} \textcolor{keywordtype}{char} **token) \{}
\DoxyCodeLine{261   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{262   skip\_space(token);}
\DoxyCodeLine{263   i = my\_atoi((*token));}
\DoxyCodeLine{264   (*token) += until\_space((*token));}
\DoxyCodeLine{265   \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{266 \}}
\DoxyCodeLine{267 }
\DoxyCodeLine{268 \textcolor{comment}{/*}}
\DoxyCodeLine{269 \textcolor{comment}{ * Tries to parse a floating point number located at s.}}
\DoxyCodeLine{270 \textcolor{comment}{ *}}
\DoxyCodeLine{271 \textcolor{comment}{ * s\_end should be a location in the string where reading should absolutely}}
\DoxyCodeLine{272 \textcolor{comment}{ * stop. For example at the end of the string, to prevent buffer overflows.}}
\DoxyCodeLine{273 \textcolor{comment}{ *}}
\DoxyCodeLine{274 \textcolor{comment}{ * Parses the following EBNF grammar:}}
\DoxyCodeLine{275 \textcolor{comment}{ *   sign    = "{}+"{} | "{}-\/"{} ;}}
\DoxyCodeLine{276 \textcolor{comment}{ *   END     = ? anything not in digit ?}}
\DoxyCodeLine{277 \textcolor{comment}{ *   digit   = "{}0"{} | "{}1"{} | "{}2"{} | "{}3"{} | "{}4"{} | "{}5"{} | "{}6"{} | "{}7"{} | "{}8"{} | "{}9"{} ;}}
\DoxyCodeLine{278 \textcolor{comment}{ *   integer = [sign] , digit , \{digit\} ;}}
\DoxyCodeLine{279 \textcolor{comment}{ *   decimal = integer , ["{}."{} , integer] ;}}
\DoxyCodeLine{280 \textcolor{comment}{ *   float   = ( decimal , END ) | ( decimal , ("{}E"{} | "{}e"{}) , integer , END ) ;}}
\DoxyCodeLine{281 \textcolor{comment}{ *}}
\DoxyCodeLine{282 \textcolor{comment}{ *  Valid strings are for example:}}
\DoxyCodeLine{283 \textcolor{comment}{ *   -\/0  +3.1417e+2  -\/0.0E-\/3  1.0324  -\/1.41   11e2}}
\DoxyCodeLine{284 \textcolor{comment}{ *}}
\DoxyCodeLine{285 \textcolor{comment}{ * If the parsing is a success, result is set to the parsed value and true}}
\DoxyCodeLine{286 \textcolor{comment}{ * is returned.}}
\DoxyCodeLine{287 \textcolor{comment}{ *}}
\DoxyCodeLine{288 \textcolor{comment}{ * The function is greedy and will parse until any of the following happens:}}
\DoxyCodeLine{289 \textcolor{comment}{ *  -\/ a non-\/conforming character is encountered.}}
\DoxyCodeLine{290 \textcolor{comment}{ *  -\/ s\_end is reached.}}
\DoxyCodeLine{291 \textcolor{comment}{ *}}
\DoxyCodeLine{292 \textcolor{comment}{ * The following situations triggers a failure:}}
\DoxyCodeLine{293 \textcolor{comment}{ *  -\/ s >= s\_end.}}
\DoxyCodeLine{294 \textcolor{comment}{ *  -\/ parse failure.}}
\DoxyCodeLine{295 \textcolor{comment}{ */}}
\DoxyCodeLine{296 \textcolor{keyword}{static} \textcolor{keywordtype}{int} tryParseDouble(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *s\_end, \textcolor{keywordtype}{double} *result) \{}
\DoxyCodeLine{297   \textcolor{keywordtype}{double} mantissa = 0.0;}
\DoxyCodeLine{298   \textcolor{comment}{/* This exponent is base 2 rather than 10.}}
\DoxyCodeLine{299 \textcolor{comment}{   * However the exponent we parse is supposed to be one of ten,}}
\DoxyCodeLine{300 \textcolor{comment}{   * thus we must take care to convert the exponent/and or the}}
\DoxyCodeLine{301 \textcolor{comment}{   * mantissa to a * 2\string^E, where a is the mantissa and E is the}}
\DoxyCodeLine{302 \textcolor{comment}{   * exponent.}}
\DoxyCodeLine{303 \textcolor{comment}{   * To get the final double we will use ldexp, it requires the}}
\DoxyCodeLine{304 \textcolor{comment}{   * exponent to be in base 2.}}
\DoxyCodeLine{305 \textcolor{comment}{   */}}
\DoxyCodeLine{306   \textcolor{keywordtype}{int} exponent = 0;}
\DoxyCodeLine{307 }
\DoxyCodeLine{308   \textcolor{comment}{/* NOTE: THESE MUST BE DECLARED HERE SINCE WE ARE NOT ALLOWED}}
\DoxyCodeLine{309 \textcolor{comment}{   * TO JUMP OVER DEFINITIONS.}}
\DoxyCodeLine{310 \textcolor{comment}{   */}}
\DoxyCodeLine{311   \textcolor{keywordtype}{char} sign = \textcolor{charliteral}{'+'};}
\DoxyCodeLine{312   \textcolor{keywordtype}{char} exp\_sign = \textcolor{charliteral}{'+'};}
\DoxyCodeLine{313   \textcolor{keywordtype}{char} \textcolor{keyword}{const} *curr = s;}
\DoxyCodeLine{314 }
\DoxyCodeLine{315   \textcolor{comment}{/* How many characters were read in a loop. */}}
\DoxyCodeLine{316   \textcolor{keywordtype}{int} read = 0;}
\DoxyCodeLine{317   \textcolor{comment}{/* Tells whether a loop terminated due to reaching s\_end. */}}
\DoxyCodeLine{318   \textcolor{keywordtype}{int} end\_not\_reached = 0;}
\DoxyCodeLine{319 }
\DoxyCodeLine{320   \textcolor{comment}{/*}}
\DoxyCodeLine{321 \textcolor{comment}{     BEGIN PARSING.}}
\DoxyCodeLine{322 \textcolor{comment}{     */}}
\DoxyCodeLine{323 }
\DoxyCodeLine{324   \textcolor{keywordflow}{if} (s >= s\_end) \{}
\DoxyCodeLine{325     \textcolor{keywordflow}{return} 0; \textcolor{comment}{/* fail */}}
\DoxyCodeLine{326   \}}
\DoxyCodeLine{327 }
\DoxyCodeLine{328   \textcolor{comment}{/* Find out what sign we've got. */}}
\DoxyCodeLine{329   \textcolor{keywordflow}{if} (*curr == \textcolor{charliteral}{'+'} || *curr == \textcolor{charliteral}{'-\/'}) \{}
\DoxyCodeLine{330     sign = *curr;}
\DoxyCodeLine{331     curr++;}
\DoxyCodeLine{332   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (IS\_DIGIT(*curr)) \{ \textcolor{comment}{/* Pass through. */}}
\DoxyCodeLine{333   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{334     \textcolor{keywordflow}{goto} fail;}
\DoxyCodeLine{335   \}}
\DoxyCodeLine{336 }
\DoxyCodeLine{337   \textcolor{comment}{/* Read the integer part. */}}
\DoxyCodeLine{338   end\_not\_reached = (curr != s\_end);}
\DoxyCodeLine{339   \textcolor{keywordflow}{while} (end\_not\_reached \&\& IS\_DIGIT(*curr)) \{}
\DoxyCodeLine{340     mantissa *= 10;}
\DoxyCodeLine{341     mantissa += (int)(*curr -\/ 0x30);}
\DoxyCodeLine{342     curr++;}
\DoxyCodeLine{343     read++;}
\DoxyCodeLine{344     end\_not\_reached = (curr != s\_end);}
\DoxyCodeLine{345   \}}
\DoxyCodeLine{346 }
\DoxyCodeLine{347   \textcolor{comment}{/* We must make sure we actually got something. */}}
\DoxyCodeLine{348   \textcolor{keywordflow}{if} (read == 0) \textcolor{keywordflow}{goto} fail;}
\DoxyCodeLine{349   \textcolor{comment}{/* We allow numbers of form "{}\#"{}, "{}\#\#\#"{} etc. */}}
\DoxyCodeLine{350   \textcolor{keywordflow}{if} (!end\_not\_reached) \textcolor{keywordflow}{goto} assemble;}
\DoxyCodeLine{351 }
\DoxyCodeLine{352   \textcolor{comment}{/* Read the decimal part. */}}
\DoxyCodeLine{353   \textcolor{keywordflow}{if} (*curr == \textcolor{charliteral}{'.'}) \{}
\DoxyCodeLine{354     curr++;}
\DoxyCodeLine{355     read = 1;}
\DoxyCodeLine{356     end\_not\_reached = (curr != s\_end);}
\DoxyCodeLine{357     \textcolor{keywordflow}{while} (end\_not\_reached \&\& IS\_DIGIT(*curr)) \{}
\DoxyCodeLine{358       \textcolor{comment}{/* pow(10.0, -\/read) */}}
\DoxyCodeLine{359       \textcolor{keywordtype}{double} frac\_value = 1.0;}
\DoxyCodeLine{360       \textcolor{keywordtype}{int} f;}
\DoxyCodeLine{361       \textcolor{keywordflow}{for} (f = 0; f < read; f++) \{}
\DoxyCodeLine{362         frac\_value *= 0.1;}
\DoxyCodeLine{363       \}}
\DoxyCodeLine{364       mantissa += (int)(*curr -\/ 0x30) * frac\_value;}
\DoxyCodeLine{365       read++;}
\DoxyCodeLine{366       curr++;}
\DoxyCodeLine{367       end\_not\_reached = (curr != s\_end);}
\DoxyCodeLine{368     \}}
\DoxyCodeLine{369   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*curr == \textcolor{charliteral}{'e'} || *curr == \textcolor{charliteral}{'E'}) \{}
\DoxyCodeLine{370   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{371     \textcolor{keywordflow}{goto} assemble;}
\DoxyCodeLine{372   \}}
\DoxyCodeLine{373 }
\DoxyCodeLine{374   \textcolor{keywordflow}{if} (!end\_not\_reached) \textcolor{keywordflow}{goto} assemble;}
\DoxyCodeLine{375 }
\DoxyCodeLine{376   \textcolor{comment}{/* Read the exponent part. */}}
\DoxyCodeLine{377   \textcolor{keywordflow}{if} (*curr == \textcolor{charliteral}{'e'} || *curr == \textcolor{charliteral}{'E'}) \{}
\DoxyCodeLine{378     curr++;}
\DoxyCodeLine{379     \textcolor{comment}{/* Figure out if a sign is present and if it is. */}}
\DoxyCodeLine{380     end\_not\_reached = (curr != s\_end);}
\DoxyCodeLine{381     \textcolor{keywordflow}{if} (end\_not\_reached \&\& (*curr == \textcolor{charliteral}{'+'} || *curr == \textcolor{charliteral}{'-\/'})) \{}
\DoxyCodeLine{382       exp\_sign = *curr;}
\DoxyCodeLine{383       curr++;}
\DoxyCodeLine{384     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (IS\_DIGIT(*curr)) \{ \textcolor{comment}{/* Pass through. */}}
\DoxyCodeLine{385     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{386       \textcolor{comment}{/* Empty E is not allowed. */}}
\DoxyCodeLine{387       \textcolor{keywordflow}{goto} fail;}
\DoxyCodeLine{388     \}}
\DoxyCodeLine{389 }
\DoxyCodeLine{390     read = 0;}
\DoxyCodeLine{391     end\_not\_reached = (curr != s\_end);}
\DoxyCodeLine{392     \textcolor{keywordflow}{while} (end\_not\_reached \&\& IS\_DIGIT(*curr)) \{}
\DoxyCodeLine{393       exponent *= 10;}
\DoxyCodeLine{394       exponent += (int)(*curr -\/ 0x30);}
\DoxyCodeLine{395       curr++;}
\DoxyCodeLine{396       read++;}
\DoxyCodeLine{397       end\_not\_reached = (curr != s\_end);}
\DoxyCodeLine{398     \}}
\DoxyCodeLine{399     \textcolor{keywordflow}{if} (read == 0) \textcolor{keywordflow}{goto} fail;}
\DoxyCodeLine{400   \}}
\DoxyCodeLine{401 }
\DoxyCodeLine{402 assemble :}
\DoxyCodeLine{403 }
\DoxyCodeLine{404   \{}
\DoxyCodeLine{405     \textcolor{keywordtype}{double} a = 1.0; \textcolor{comment}{/* = pow(5.0, exponent); */}}
\DoxyCodeLine{406     \textcolor{keywordtype}{double} b  = 1.0; \textcolor{comment}{/* = 2.0\string^exponent */}}
\DoxyCodeLine{407     \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{408     \textcolor{keywordflow}{for} (i = 0; i < exponent; i++) \{}
\DoxyCodeLine{409       a = a * 5.0;}
\DoxyCodeLine{410     \}}
\DoxyCodeLine{411 }
\DoxyCodeLine{412     \textcolor{keywordflow}{for} (i = 0; i < exponent; i++) \{}
\DoxyCodeLine{413       b = b * 2.0;}
\DoxyCodeLine{414     \}}
\DoxyCodeLine{415 }
\DoxyCodeLine{416     \textcolor{keywordflow}{if} (exp\_sign == \textcolor{charliteral}{'-\/'}) \{}
\DoxyCodeLine{417       a = 1.0 / a;}
\DoxyCodeLine{418       b = 1.0 / b;}
\DoxyCodeLine{419     \}}
\DoxyCodeLine{420 }
\DoxyCodeLine{421     *result =}
\DoxyCodeLine{422       \textcolor{comment}{/* (sign == '+' ? 1 : -\/1) * ldexp(mantissa * pow(5.0, exponent),}}
\DoxyCodeLine{423 \textcolor{comment}{         exponent); */}}
\DoxyCodeLine{424       (sign == \textcolor{charliteral}{'+'} ? 1 : -\/1) * (mantissa * a * b);}
\DoxyCodeLine{425   \}}
\DoxyCodeLine{426 }
\DoxyCodeLine{427   \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{428 fail:}
\DoxyCodeLine{429   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{430 \}}
\DoxyCodeLine{431 }
\DoxyCodeLine{432 \textcolor{keyword}{static} \textcolor{keywordtype}{float} parseFloat(\textcolor{keyword}{const} \textcolor{keywordtype}{char} **token) \{}
\DoxyCodeLine{433   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *end;}
\DoxyCodeLine{434   \textcolor{keywordtype}{double} val = 0.0;}
\DoxyCodeLine{435   \textcolor{keywordtype}{float} f = 0.0f;}
\DoxyCodeLine{436   skip\_space(token);}
\DoxyCodeLine{437   end = (*token) + until\_space((*token));}
\DoxyCodeLine{438   val = 0.0;}
\DoxyCodeLine{439   tryParseDouble((*token), end, \&val);}
\DoxyCodeLine{440   f = (float)(val);}
\DoxyCodeLine{441   (*token) = end;}
\DoxyCodeLine{442   \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{443 \}}
\DoxyCodeLine{444 }
\DoxyCodeLine{445 \textcolor{keyword}{static} \textcolor{keywordtype}{void} parseFloat2(\textcolor{keywordtype}{float} *x, \textcolor{keywordtype}{float} *y, \textcolor{keyword}{const} \textcolor{keywordtype}{char} **token) \{}
\DoxyCodeLine{446   (*x) = parseFloat(token);}
\DoxyCodeLine{447   (*y) = parseFloat(token);}
\DoxyCodeLine{448 \}}
\DoxyCodeLine{449 }
\DoxyCodeLine{450 \textcolor{keyword}{static} \textcolor{keywordtype}{void} parseFloat3(\textcolor{keywordtype}{float} *x, \textcolor{keywordtype}{float} *y, \textcolor{keywordtype}{float} *z, \textcolor{keyword}{const} \textcolor{keywordtype}{char} **token) \{}
\DoxyCodeLine{451   (*x) = parseFloat(token);}
\DoxyCodeLine{452   (*y) = parseFloat(token);}
\DoxyCodeLine{453   (*z) = parseFloat(token);}
\DoxyCodeLine{454 \}}
\DoxyCodeLine{455 }
\DoxyCodeLine{456 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} my\_strnlen(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n) \{}
\DoxyCodeLine{457     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *p = memchr(s, 0, n);}
\DoxyCodeLine{458     \textcolor{keywordflow}{return} p ? (\textcolor{keywordtype}{unsigned} int)(p -\/ s) : n;}
\DoxyCodeLine{459 \}}
\DoxyCodeLine{460 }
\DoxyCodeLine{461 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *my\_strdup(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} max\_length) \{}
\DoxyCodeLine{462   \textcolor{keywordtype}{char} *d;}
\DoxyCodeLine{463   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len;}
\DoxyCodeLine{464 }
\DoxyCodeLine{465   \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{466 }
\DoxyCodeLine{467   \textcolor{comment}{/* Do not consider CRLF line ending(\#19) */}}
\DoxyCodeLine{468   len = length\_until\_line\_feed(s, max\_length);}
\DoxyCodeLine{469   \textcolor{comment}{/* len = strlen(s); */}}
\DoxyCodeLine{470 }
\DoxyCodeLine{471   \textcolor{comment}{/* trim line ending and append '\(\backslash\)0' */}}
\DoxyCodeLine{472   d = (\textcolor{keywordtype}{char} *)TINYOBJ\_MALLOC(len + 1); \textcolor{comment}{/* + '\(\backslash\)0' */}}
\DoxyCodeLine{473   memcpy(d, s, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int})(len));}
\DoxyCodeLine{474   d[len] = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{475 }
\DoxyCodeLine{476   \textcolor{keywordflow}{return} d;}
\DoxyCodeLine{477 \}}
\DoxyCodeLine{478 }
\DoxyCodeLine{479 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *my\_strndup(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len) \{}
\DoxyCodeLine{480   \textcolor{keywordtype}{char} *d;}
\DoxyCodeLine{481   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} slen;}
\DoxyCodeLine{482 }
\DoxyCodeLine{483   \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{484   \textcolor{keywordflow}{if} (len == 0) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{485 }
\DoxyCodeLine{486   slen = my\_strnlen(s, len);}
\DoxyCodeLine{487   d = (\textcolor{keywordtype}{char} *)TINYOBJ\_MALLOC(slen + 1); \textcolor{comment}{/* + '\(\backslash\)0' */}}
\DoxyCodeLine{488   \textcolor{keywordflow}{if} (!d) \{}
\DoxyCodeLine{489     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{490   \}}
\DoxyCodeLine{491   memcpy(d, s, slen);}
\DoxyCodeLine{492   d[slen] = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{493 }
\DoxyCodeLine{494   \textcolor{keywordflow}{return} d;}
\DoxyCodeLine{495 \}}
\DoxyCodeLine{496 }
\DoxyCodeLine{497 \textcolor{keywordtype}{char} *dynamic\_fgets(\textcolor{keywordtype}{char} **buf, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *size, FILE *file) \{}
\DoxyCodeLine{498   \textcolor{keywordtype}{char} *offset;}
\DoxyCodeLine{499   \textcolor{keywordtype}{char} *ret;}
\DoxyCodeLine{500   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} old\_size;}
\DoxyCodeLine{501 }
\DoxyCodeLine{502   \textcolor{keywordflow}{if} (!(ret = fgets(*buf, (\textcolor{keywordtype}{int})*size, file))) \{}
\DoxyCodeLine{503     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{504   \}}
\DoxyCodeLine{505 }
\DoxyCodeLine{506   \textcolor{keywordflow}{if} (NULL != strchr(*buf, \textcolor{charliteral}{'\(\backslash\)n'})) \{}
\DoxyCodeLine{507     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{508   \}}
\DoxyCodeLine{509 }
\DoxyCodeLine{510   \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{511     old\_size = *size;}
\DoxyCodeLine{512     *size *= 2;}
\DoxyCodeLine{513     *buf = (\textcolor{keywordtype}{char}*)TINYOBJ\_REALLOC(*buf, *size);}
\DoxyCodeLine{514     offset = \&((*buf)[old\_size -\/ 1]);}
\DoxyCodeLine{515 }
\DoxyCodeLine{516     ret = fgets(offset, (\textcolor{keywordtype}{int})(old\_size + 1), file);}
\DoxyCodeLine{517   \} \textcolor{keywordflow}{while}(ret \&\& (NULL == strchr(*buf, \textcolor{charliteral}{'\(\backslash\)n'})));}
\DoxyCodeLine{518 }
\DoxyCodeLine{519   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{520 \}}
\DoxyCodeLine{521 }
\DoxyCodeLine{522 \textcolor{keyword}{static} \textcolor{keywordtype}{void} initMaterial(\mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *material) \{}
\DoxyCodeLine{523   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{524   material-\/>name = NULL;}
\DoxyCodeLine{525   material-\/>ambient\_texname = NULL;}
\DoxyCodeLine{526   material-\/>diffuse\_texname = NULL;}
\DoxyCodeLine{527   material-\/>specular\_texname = NULL;}
\DoxyCodeLine{528   material-\/>specular\_highlight\_texname = NULL;}
\DoxyCodeLine{529   material-\/>bump\_texname = NULL;}
\DoxyCodeLine{530   material-\/>displacement\_texname = NULL;}
\DoxyCodeLine{531   material-\/>alpha\_texname = NULL;}
\DoxyCodeLine{532   \textcolor{keywordflow}{for} (i = 0; i < 3; i++) \{}
\DoxyCodeLine{533     material-\/>ambient[i] = 0.f;}
\DoxyCodeLine{534     material-\/>diffuse[i] = 0.f;}
\DoxyCodeLine{535     material-\/>specular[i] = 0.f;}
\DoxyCodeLine{536     material-\/>transmittance[i] = 0.f;}
\DoxyCodeLine{537     material-\/>emission[i] = 0.f;}
\DoxyCodeLine{538   \}}
\DoxyCodeLine{539   material-\/>illum = 0;}
\DoxyCodeLine{540   material-\/>dissolve = 1.f;}
\DoxyCodeLine{541   material-\/>shininess = 1.f;}
\DoxyCodeLine{542   material-\/>ior = 1.f;}
\DoxyCodeLine{543 \}}
\DoxyCodeLine{544 }
\DoxyCodeLine{545 \textcolor{comment}{/* Implementation of string to int hashtable */}}
\DoxyCodeLine{546 }
\DoxyCodeLine{547 \textcolor{preprocessor}{\#define HASH\_TABLE\_ERROR 1 }}
\DoxyCodeLine{548 \textcolor{preprocessor}{\#define HASH\_TABLE\_SUCCESS 0}}
\DoxyCodeLine{549 }
\DoxyCodeLine{550 \textcolor{preprocessor}{\#define HASH\_TABLE\_DEFAULT\_SIZE 10}}
\DoxyCodeLine{551 }
\DoxyCodeLine{552 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }hash\_table\_entry\_t}
\DoxyCodeLine{553 \{}
\DoxyCodeLine{554   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}};}
\DoxyCodeLine{555   \textcolor{keywordtype}{int} filled;}
\DoxyCodeLine{556   \textcolor{keywordtype}{int} pad0;}
\DoxyCodeLine{557   \textcolor{keywordtype}{long} value;}
\DoxyCodeLine{558 }
\DoxyCodeLine{559   \textcolor{keyword}{struct }hash\_table\_entry\_t* next;}
\DoxyCodeLine{560 \} hash\_table\_entry\_t;}
\DoxyCodeLine{561 }
\DoxyCodeLine{562 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{563 \{}
\DoxyCodeLine{564   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long}* hashes;}
\DoxyCodeLine{565   hash\_table\_entry\_t* entries;}
\DoxyCodeLine{566   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} capacity;}
\DoxyCodeLine{567   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{568 \} hash\_table\_t;}
\DoxyCodeLine{569 }
\DoxyCodeLine{570 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} hash\_djb2(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* str)}
\DoxyCodeLine{571 \{}
\DoxyCodeLine{572   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}} = 5381;}
\DoxyCodeLine{573   \textcolor{keywordtype}{int} c;}
\DoxyCodeLine{574 }
\DoxyCodeLine{575   \textcolor{keywordflow}{while} ((c = *str++)) \{}
\DoxyCodeLine{576     \mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}} = ((\mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}} << 5) + hash) + (\textcolor{keywordtype}{unsigned} long)(c);}
\DoxyCodeLine{577   \}}
\DoxyCodeLine{578 }
\DoxyCodeLine{579   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}};}
\DoxyCodeLine{580 \}}
\DoxyCodeLine{581 }
\DoxyCodeLine{582 \textcolor{keyword}{static} \textcolor{keywordtype}{void} create\_hash\_table(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} start\_capacity, hash\_table\_t* hash\_table)}
\DoxyCodeLine{583 \{}
\DoxyCodeLine{584   \textcolor{keywordflow}{if} (start\_capacity < 1)}
\DoxyCodeLine{585     start\_capacity = HASH\_TABLE\_DEFAULT\_SIZE;}
\DoxyCodeLine{586   hash\_table-\/>hashes = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long}*) TINYOBJ\_MALLOC(start\_capacity * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long}));}
\DoxyCodeLine{587   hash\_table-\/>entries = (hash\_table\_entry\_t*) TINYOBJ\_CALLOC(start\_capacity, \textcolor{keyword}{sizeof}(hash\_table\_entry\_t));}
\DoxyCodeLine{588   hash\_table-\/>capacity = start\_capacity;}
\DoxyCodeLine{589   hash\_table-\/>n = 0;}
\DoxyCodeLine{590 \}}
\DoxyCodeLine{591 }
\DoxyCodeLine{592 \textcolor{keyword}{static} \textcolor{keywordtype}{void} destroy\_hash\_table(hash\_table\_t* hash\_table)}
\DoxyCodeLine{593 \{}
\DoxyCodeLine{594   TINYOBJ\_FREE(hash\_table-\/>entries);}
\DoxyCodeLine{595   TINYOBJ\_FREE(hash\_table-\/>hashes);}
\DoxyCodeLine{596 \}}
\DoxyCodeLine{597 }
\DoxyCodeLine{598 \textcolor{comment}{/* Insert with quadratic probing */}}
\DoxyCodeLine{599 \textcolor{keyword}{static} \textcolor{keywordtype}{int} hash\_table\_insert\_value(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} hash, \textcolor{keywordtype}{long} value, hash\_table\_t* hash\_table)}
\DoxyCodeLine{600 \{}
\DoxyCodeLine{601   \textcolor{comment}{/* Insert value */}}
\DoxyCodeLine{602   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} start\_index = \mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}} \% hash\_table-\/>capacity;}
\DoxyCodeLine{603   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} index = start\_index;}
\DoxyCodeLine{604   hash\_table\_entry\_t* start\_entry = hash\_table-\/>entries + start\_index;}
\DoxyCodeLine{605   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{606   hash\_table\_entry\_t* entry;}
\DoxyCodeLine{607 }
\DoxyCodeLine{608   \textcolor{keywordflow}{for} (i = 1; hash\_table-\/>entries[index].filled; i++)}
\DoxyCodeLine{609   \{}
\DoxyCodeLine{610     \textcolor{keywordflow}{if} (i >= hash\_table-\/>capacity)}
\DoxyCodeLine{611       \textcolor{keywordflow}{return} HASH\_TABLE\_ERROR;}
\DoxyCodeLine{612     index = (start\_index + (i * i)) \% hash\_table-\/>capacity; }
\DoxyCodeLine{613   \}}
\DoxyCodeLine{614 }
\DoxyCodeLine{615   entry = hash\_table-\/>entries + index;}
\DoxyCodeLine{616   entry-\/>hash = \mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}};}
\DoxyCodeLine{617   entry-\/>filled = 1;}
\DoxyCodeLine{618   entry-\/>value = value;}
\DoxyCodeLine{619 }
\DoxyCodeLine{620   \textcolor{keywordflow}{if} (index != start\_index) \{}
\DoxyCodeLine{621     \textcolor{comment}{/* This is a new entry, but not the start entry, hence we need to add a next pointer to our entry */}}
\DoxyCodeLine{622     entry-\/>next = start\_entry-\/>next;}
\DoxyCodeLine{623     start\_entry-\/>next = entry;}
\DoxyCodeLine{624   \}}
\DoxyCodeLine{625 }
\DoxyCodeLine{626   \textcolor{keywordflow}{return} HASH\_TABLE\_SUCCESS;}
\DoxyCodeLine{627 \}}
\DoxyCodeLine{628 }
\DoxyCodeLine{629 \textcolor{keyword}{static} \textcolor{keywordtype}{int} hash\_table\_insert(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} hash, \textcolor{keywordtype}{long} value, hash\_table\_t* hash\_table)}
\DoxyCodeLine{630 \{}
\DoxyCodeLine{631   \textcolor{keywordtype}{int} ret = hash\_table\_insert\_value(hash, value, hash\_table);}
\DoxyCodeLine{632   \textcolor{keywordflow}{if} (ret == HASH\_TABLE\_SUCCESS)}
\DoxyCodeLine{633   \{}
\DoxyCodeLine{634     hash\_table-\/>hashes[hash\_table-\/>n] = \mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}};}
\DoxyCodeLine{635     hash\_table-\/>n++;}
\DoxyCodeLine{636   \}}
\DoxyCodeLine{637   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{638 \}}
\DoxyCodeLine{639 }
\DoxyCodeLine{640 \textcolor{keyword}{static} hash\_table\_entry\_t* hash\_table\_find(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} hash, hash\_table\_t* hash\_table)}
\DoxyCodeLine{641 \{}
\DoxyCodeLine{642   hash\_table\_entry\_t* entry = hash\_table-\/>entries + (\mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}} \% hash\_table-\/>capacity);}
\DoxyCodeLine{643   \textcolor{keywordflow}{while} (entry)}
\DoxyCodeLine{644   \{}
\DoxyCodeLine{645     \textcolor{keywordflow}{if} (entry-\/>hash == hash \&\& entry-\/>filled)}
\DoxyCodeLine{646     \{}
\DoxyCodeLine{647       \textcolor{keywordflow}{return} entry;}
\DoxyCodeLine{648     \}}
\DoxyCodeLine{649     entry = entry-\/>next;}
\DoxyCodeLine{650   \}}
\DoxyCodeLine{651   \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{652 \}}
\DoxyCodeLine{653 }
\DoxyCodeLine{654 \textcolor{keyword}{static} \textcolor{keywordtype}{void} hash\_table\_maybe\_grow(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} new\_n, hash\_table\_t* hash\_table)}
\DoxyCodeLine{655 \{}
\DoxyCodeLine{656   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} new\_capacity;}
\DoxyCodeLine{657   hash\_table\_t new\_hash\_table;}
\DoxyCodeLine{658   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{659 }
\DoxyCodeLine{660   \textcolor{keywordflow}{if} (new\_n <= hash\_table-\/>capacity) \{}
\DoxyCodeLine{661     \textcolor{keywordflow}{return};}
\DoxyCodeLine{662   \}}
\DoxyCodeLine{663   new\_capacity = 2 * ((2 * hash\_table-\/>capacity) > new\_n ? hash\_table-\/>capacity : new\_n);}
\DoxyCodeLine{664   \textcolor{comment}{/* Create a new hash table. We're not calling create\_hash\_table because we want to realloc the hash array */}}
\DoxyCodeLine{665   new\_hash\_table.hashes = hash\_table-\/>hashes = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long}*) TINYOBJ\_REALLOC((\textcolor{keywordtype}{void}*) hash\_table-\/>hashes, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} long) * new\_capacity);}
\DoxyCodeLine{666   new\_hash\_table.entries = (hash\_table\_entry\_t*) TINYOBJ\_CALLOC(new\_capacity, \textcolor{keyword}{sizeof}(hash\_table\_entry\_t));}
\DoxyCodeLine{667   new\_hash\_table.capacity = new\_capacity;}
\DoxyCodeLine{668   new\_hash\_table.n = hash\_table-\/>n;}
\DoxyCodeLine{669 }
\DoxyCodeLine{670   \textcolor{comment}{/* Rehash */}}
\DoxyCodeLine{671   \textcolor{keywordflow}{for} (i = 0; i < hash\_table-\/>capacity; i++)}
\DoxyCodeLine{672   \{}
\DoxyCodeLine{673     hash\_table\_entry\_t* entry = hash\_table\_find(hash\_table-\/>hashes[i], hash\_table);}
\DoxyCodeLine{674     hash\_table\_insert\_value(hash\_table-\/>hashes[i], entry-\/>value, \&new\_hash\_table);}
\DoxyCodeLine{675   \}}
\DoxyCodeLine{676 }
\DoxyCodeLine{677   TINYOBJ\_FREE(hash\_table-\/>entries);}
\DoxyCodeLine{678   (*hash\_table) = new\_hash\_table;}
\DoxyCodeLine{679 \}}
\DoxyCodeLine{680 }
\DoxyCodeLine{681 \textcolor{keyword}{static} \textcolor{keywordtype}{int} hash\_table\_exists(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name, hash\_table\_t* hash\_table)}
\DoxyCodeLine{682 \{}
\DoxyCodeLine{683   \textcolor{keywordflow}{return} hash\_table\_find(hash\_djb2((\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}*)name), hash\_table) != NULL;}
\DoxyCodeLine{684 \}}
\DoxyCodeLine{685 }
\DoxyCodeLine{686 \textcolor{keyword}{static} \textcolor{keywordtype}{void} hash\_table\_set(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} val, hash\_table\_t* hash\_table)}
\DoxyCodeLine{687 \{}
\DoxyCodeLine{688   \textcolor{comment}{/* Hash name */}}
\DoxyCodeLine{689   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{namespacedetail_a9dd43d16a6a490b032ceaca358755a29}{hash}} = hash\_djb2((\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *)name);}
\DoxyCodeLine{690 }
\DoxyCodeLine{691   hash\_table\_entry\_t* entry = hash\_table\_find(hash, hash\_table);}
\DoxyCodeLine{692   \textcolor{keywordflow}{if} (entry)}
\DoxyCodeLine{693   \{}
\DoxyCodeLine{694     entry-\/>value = (long)val;}
\DoxyCodeLine{695     \textcolor{keywordflow}{return};}
\DoxyCodeLine{696   \}}
\DoxyCodeLine{697 }
\DoxyCodeLine{698   \textcolor{comment}{/* Expand if necessary}}
\DoxyCodeLine{699 \textcolor{comment}{   * Grow until the element has been added}}
\DoxyCodeLine{700 \textcolor{comment}{   */}}
\DoxyCodeLine{701   \textcolor{keywordflow}{do}}
\DoxyCodeLine{702   \{}
\DoxyCodeLine{703     hash\_table\_maybe\_grow(hash\_table-\/>n + 1, hash\_table);}
\DoxyCodeLine{704   \}}
\DoxyCodeLine{705   \textcolor{keywordflow}{while} (hash\_table\_insert(hash, (\textcolor{keywordtype}{long})val, hash\_table) != HASH\_TABLE\_SUCCESS);}
\DoxyCodeLine{706 \}}
\DoxyCodeLine{707 }
\DoxyCodeLine{708 \textcolor{keyword}{static} \textcolor{keywordtype}{long} hash\_table\_get(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name, hash\_table\_t* hash\_table)}
\DoxyCodeLine{709 \{}
\DoxyCodeLine{710   hash\_table\_entry\_t* ret = hash\_table\_find(hash\_djb2((\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}*)(name)), hash\_table);}
\DoxyCodeLine{711   \textcolor{keywordflow}{return} ret-\/>value;}
\DoxyCodeLine{712 \}}
\DoxyCodeLine{713 }
\DoxyCodeLine{714 \textcolor{keyword}{static} \mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *tinyobj\_material\_add(\mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *prev,}
\DoxyCodeLine{715                                                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_materials,}
\DoxyCodeLine{716                                                 \mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *new\_mat) \{}
\DoxyCodeLine{717   \mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *dst;}
\DoxyCodeLine{718   dst = (\mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *)TINYOBJ\_REALLOC(}
\DoxyCodeLine{719                                       prev, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}}) * (num\_materials + 1));}
\DoxyCodeLine{720 }
\DoxyCodeLine{721   dst[num\_materials] = (*new\_mat); \textcolor{comment}{/* Just copy pointer for char* members */}}
\DoxyCodeLine{722   \textcolor{keywordflow}{return} dst;}
\DoxyCodeLine{723 \}}
\DoxyCodeLine{724 }
\DoxyCodeLine{725 \textcolor{keyword}{static} \textcolor{keywordtype}{int} tinyobj\_parse\_and\_index\_mtl\_file(\mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} **materials\_out,}
\DoxyCodeLine{726                                             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *num\_materials\_out,}
\DoxyCodeLine{727                                             \textcolor{keyword}{const} \textcolor{keywordtype}{char} *filename,}
\DoxyCodeLine{728                                             hash\_table\_t* material\_table) \{}
\DoxyCodeLine{729   \mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} material;}
\DoxyCodeLine{730   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} buffer\_size = 128;}
\DoxyCodeLine{731   \textcolor{keywordtype}{char} *linebuf;}
\DoxyCodeLine{732   FILE *fp;}
\DoxyCodeLine{733   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_materials = 0;}
\DoxyCodeLine{734   \mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *materials = NULL;}
\DoxyCodeLine{735   \textcolor{keywordtype}{int} has\_previous\_material = 0;}
\DoxyCodeLine{736   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *line\_end = NULL;}
\DoxyCodeLine{737 }
\DoxyCodeLine{738   \textcolor{keywordflow}{if} (materials\_out == NULL) \{}
\DoxyCodeLine{739     \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_INVALID\_PARAMETER;}
\DoxyCodeLine{740   \}}
\DoxyCodeLine{741 }
\DoxyCodeLine{742   \textcolor{keywordflow}{if} (num\_materials\_out == NULL) \{}
\DoxyCodeLine{743     \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_INVALID\_PARAMETER;}
\DoxyCodeLine{744   \}}
\DoxyCodeLine{745 }
\DoxyCodeLine{746   (*materials\_out) = NULL;}
\DoxyCodeLine{747   (*num\_materials\_out) = 0;}
\DoxyCodeLine{748 }
\DoxyCodeLine{749   fp = fopen(filename, \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{750   \textcolor{keywordflow}{if} (!fp) \{}
\DoxyCodeLine{751     fprintf(stderr, \textcolor{stringliteral}{"{}TINYOBJ: Error reading file '\%s': \%s (\%d)\(\backslash\)n"{}}, filename, strerror(errno), errno);}
\DoxyCodeLine{752     \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_FILE\_OPERATION;}
\DoxyCodeLine{753   \}}
\DoxyCodeLine{754 }
\DoxyCodeLine{755   \textcolor{comment}{/* Create a default material */}}
\DoxyCodeLine{756   initMaterial(\&material);}
\DoxyCodeLine{757 }
\DoxyCodeLine{758   linebuf = (\textcolor{keywordtype}{char}*)TINYOBJ\_MALLOC(buffer\_size);}
\DoxyCodeLine{759   \textcolor{keywordflow}{while} (NULL != dynamic\_fgets(\&linebuf, \&buffer\_size, fp)) \{}
\DoxyCodeLine{760     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *token = linebuf;}
\DoxyCodeLine{761 }
\DoxyCodeLine{762     line\_end = token + strlen(token);}
\DoxyCodeLine{763 }
\DoxyCodeLine{764     \textcolor{comment}{/* Skip leading space. */}}
\DoxyCodeLine{765     token += strspn(token, \textcolor{stringliteral}{"{} \(\backslash\)t"{}});}
\DoxyCodeLine{766 }
\DoxyCodeLine{767     assert(token);}
\DoxyCodeLine{768     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'\(\backslash\)0'}) \textcolor{keywordflow}{continue}; \textcolor{comment}{/* empty line */}}
\DoxyCodeLine{769 }
\DoxyCodeLine{770     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'\#'}) \textcolor{keywordflow}{continue}; \textcolor{comment}{/* comment line */}}
\DoxyCodeLine{771 }
\DoxyCodeLine{772     \textcolor{comment}{/* new mtl */}}
\DoxyCodeLine{773     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}newmtl"{}}, 6)) \&\& IS\_SPACE((token[6]))) \{}
\DoxyCodeLine{774       \textcolor{keywordtype}{char} namebuf[4096];}
\DoxyCodeLine{775 }
\DoxyCodeLine{776       \textcolor{comment}{/* flush previous material. */}}
\DoxyCodeLine{777       \textcolor{keywordflow}{if} (has\_previous\_material) \{}
\DoxyCodeLine{778         materials = tinyobj\_material\_add(materials, num\_materials, \&material);}
\DoxyCodeLine{779         num\_materials++;}
\DoxyCodeLine{780       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{781         has\_previous\_material = 1;}
\DoxyCodeLine{782       \}}
\DoxyCodeLine{783 }
\DoxyCodeLine{784       \textcolor{comment}{/* initial temporary material */}}
\DoxyCodeLine{785       initMaterial(\&material);}
\DoxyCodeLine{786 }
\DoxyCodeLine{787       \textcolor{comment}{/* set new mtl name */}}
\DoxyCodeLine{788       token += 7;}
\DoxyCodeLine{789 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{790       sscanf\_s(token, \textcolor{stringliteral}{"{}\%s"{}}, namebuf, (\textcolor{keywordtype}{unsigned})\_countof(namebuf));}
\DoxyCodeLine{791 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{792       sscanf(token, \textcolor{stringliteral}{"{}\%s"{}}, namebuf);}
\DoxyCodeLine{793 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{794       material.name = my\_strdup(namebuf, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (line\_end -\/ token));}
\DoxyCodeLine{795 }
\DoxyCodeLine{796       \textcolor{comment}{/* Add material to material table */}}
\DoxyCodeLine{797       \textcolor{keywordflow}{if} (material\_table)}
\DoxyCodeLine{798         hash\_table\_set(material.name, num\_materials, material\_table);}
\DoxyCodeLine{799 }
\DoxyCodeLine{800       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{801     \}}
\DoxyCodeLine{802 }
\DoxyCodeLine{803     \textcolor{comment}{/* ambient */}}
\DoxyCodeLine{804     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'a'} \&\& IS\_SPACE((token[2]))) \{}
\DoxyCodeLine{805       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{806       token += 2;}
\DoxyCodeLine{807       parseFloat3(\&r, \&g, \&b, \&token);}
\DoxyCodeLine{808       material.ambient[0] = r;}
\DoxyCodeLine{809       material.ambient[1] = g;}
\DoxyCodeLine{810       material.ambient[2] = b;}
\DoxyCodeLine{811       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{812     \}}
\DoxyCodeLine{813 }
\DoxyCodeLine{814     \textcolor{comment}{/* diffuse */}}
\DoxyCodeLine{815     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'d'} \&\& IS\_SPACE((token[2]))) \{}
\DoxyCodeLine{816       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{817       token += 2;}
\DoxyCodeLine{818       parseFloat3(\&r, \&g, \&b, \&token);}
\DoxyCodeLine{819       material.diffuse[0] = r;}
\DoxyCodeLine{820       material.diffuse[1] = g;}
\DoxyCodeLine{821       material.diffuse[2] = b;}
\DoxyCodeLine{822       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{823     \}}
\DoxyCodeLine{824 }
\DoxyCodeLine{825     \textcolor{comment}{/* specular */}}
\DoxyCodeLine{826     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'s'} \&\& IS\_SPACE((token[2]))) \{}
\DoxyCodeLine{827       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{828       token += 2;}
\DoxyCodeLine{829       parseFloat3(\&r, \&g, \&b, \&token);}
\DoxyCodeLine{830       material.specular[0] = r;}
\DoxyCodeLine{831       material.specular[1] = g;}
\DoxyCodeLine{832       material.specular[2] = b;}
\DoxyCodeLine{833       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{834     \}}
\DoxyCodeLine{835 }
\DoxyCodeLine{836     \textcolor{comment}{/* transmittance */}}
\DoxyCodeLine{837     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'t'} \&\& IS\_SPACE((token[2]))) \{}
\DoxyCodeLine{838       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{839       token += 2;}
\DoxyCodeLine{840       parseFloat3(\&r, \&g, \&b, \&token);}
\DoxyCodeLine{841       material.transmittance[0] = r;}
\DoxyCodeLine{842       material.transmittance[1] = g;}
\DoxyCodeLine{843       material.transmittance[2] = b;}
\DoxyCodeLine{844       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{845     \}}
\DoxyCodeLine{846 }
\DoxyCodeLine{847     \textcolor{comment}{/* ior(index of refraction) */}}
\DoxyCodeLine{848     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'N'} \&\& token[1] == \textcolor{charliteral}{'i'} \&\& IS\_SPACE((token[2]))) \{}
\DoxyCodeLine{849       token += 2;}
\DoxyCodeLine{850       material.ior = parseFloat(\&token);}
\DoxyCodeLine{851       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{852     \}}
\DoxyCodeLine{853 }
\DoxyCodeLine{854     \textcolor{comment}{/* emission */}}
\DoxyCodeLine{855     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'K'} \&\& token[1] == \textcolor{charliteral}{'e'} \&\& IS\_SPACE(token[2])) \{}
\DoxyCodeLine{856       \textcolor{keywordtype}{float} r, g, b;}
\DoxyCodeLine{857       token += 2;}
\DoxyCodeLine{858       parseFloat3(\&r, \&g, \&b, \&token);}
\DoxyCodeLine{859       material.emission[0] = r;}
\DoxyCodeLine{860       material.emission[1] = g;}
\DoxyCodeLine{861       material.emission[2] = b;}
\DoxyCodeLine{862       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{863     \}}
\DoxyCodeLine{864 }
\DoxyCodeLine{865     \textcolor{comment}{/* shininess */}}
\DoxyCodeLine{866     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'N'} \&\& token[1] == \textcolor{charliteral}{'s'} \&\& IS\_SPACE(token[2])) \{}
\DoxyCodeLine{867       token += 2;}
\DoxyCodeLine{868       material.shininess = parseFloat(\&token);}
\DoxyCodeLine{869       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{870     \}}
\DoxyCodeLine{871 }
\DoxyCodeLine{872     \textcolor{comment}{/* illum model */}}
\DoxyCodeLine{873     \textcolor{keywordflow}{if} (0 == strncmp(token, \textcolor{stringliteral}{"{}illum"{}}, 5) \&\& IS\_SPACE(token[5])) \{}
\DoxyCodeLine{874       token += 6;}
\DoxyCodeLine{875       material.illum = parseInt(\&token);}
\DoxyCodeLine{876       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{877     \}}
\DoxyCodeLine{878 }
\DoxyCodeLine{879     \textcolor{comment}{/* dissolve */}}
\DoxyCodeLine{880     \textcolor{keywordflow}{if} ((token[0] == \textcolor{charliteral}{'d'} \&\& IS\_SPACE(token[1]))) \{}
\DoxyCodeLine{881       token += 1;}
\DoxyCodeLine{882       material.dissolve = parseFloat(\&token);}
\DoxyCodeLine{883       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{884     \}}
\DoxyCodeLine{885     \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'T'} \&\& token[1] == \textcolor{charliteral}{'r'} \&\& IS\_SPACE(token[2])) \{}
\DoxyCodeLine{886       token += 2;}
\DoxyCodeLine{887       \textcolor{comment}{/* Invert value of Tr(assume Tr is in range [0, 1]) */}}
\DoxyCodeLine{888       material.dissolve = 1.0f -\/ parseFloat(\&token);}
\DoxyCodeLine{889       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{890     \}}
\DoxyCodeLine{891 }
\DoxyCodeLine{892     \textcolor{comment}{/* ambient texture */}}
\DoxyCodeLine{893     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_Ka"{}}, 6)) \&\& IS\_SPACE(token[6])) \{}
\DoxyCodeLine{894       token += 7;}
\DoxyCodeLine{895       material.ambient\_texname = my\_strdup(token, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (line\_end -\/ token));}
\DoxyCodeLine{896       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{897     \}}
\DoxyCodeLine{898 }
\DoxyCodeLine{899     \textcolor{comment}{/* diffuse texture */}}
\DoxyCodeLine{900     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_Kd"{}}, 6)) \&\& IS\_SPACE(token[6])) \{}
\DoxyCodeLine{901       token += 7;}
\DoxyCodeLine{902       material.diffuse\_texname = my\_strdup(token, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (line\_end -\/ token));}
\DoxyCodeLine{903       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{904     \}}
\DoxyCodeLine{905 }
\DoxyCodeLine{906     \textcolor{comment}{/* specular texture */}}
\DoxyCodeLine{907     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_Ks"{}}, 6)) \&\& IS\_SPACE(token[6])) \{}
\DoxyCodeLine{908       token += 7;}
\DoxyCodeLine{909       material.specular\_texname = my\_strdup(token, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (line\_end -\/ token));}
\DoxyCodeLine{910       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{911     \}}
\DoxyCodeLine{912 }
\DoxyCodeLine{913     \textcolor{comment}{/* specular highlight texture */}}
\DoxyCodeLine{914     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_Ns"{}}, 6)) \&\& IS\_SPACE(token[6])) \{}
\DoxyCodeLine{915       token += 7;}
\DoxyCodeLine{916       material.specular\_highlight\_texname = my\_strdup(token, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (line\_end -\/ token));}
\DoxyCodeLine{917       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{918     \}}
\DoxyCodeLine{919 }
\DoxyCodeLine{920     \textcolor{comment}{/* bump texture */}}
\DoxyCodeLine{921     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_bump"{}}, 8)) \&\& IS\_SPACE(token[8])) \{}
\DoxyCodeLine{922       token += 9;}
\DoxyCodeLine{923       material.bump\_texname = my\_strdup(token, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (line\_end -\/ token));}
\DoxyCodeLine{924       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{925     \}}
\DoxyCodeLine{926 }
\DoxyCodeLine{927     \textcolor{comment}{/* alpha texture */}}
\DoxyCodeLine{928     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}map\_d"{}}, 5)) \&\& IS\_SPACE(token[5])) \{}
\DoxyCodeLine{929       token += 6;}
\DoxyCodeLine{930       material.alpha\_texname = my\_strdup(token, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (line\_end -\/ token));}
\DoxyCodeLine{931       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{932     \}}
\DoxyCodeLine{933 }
\DoxyCodeLine{934     \textcolor{comment}{/* bump texture */}}
\DoxyCodeLine{935     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}bump"{}}, 4)) \&\& IS\_SPACE(token[4])) \{}
\DoxyCodeLine{936       token += 5;}
\DoxyCodeLine{937       material.bump\_texname = my\_strdup(token, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (line\_end -\/ token));}
\DoxyCodeLine{938       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{939     \}}
\DoxyCodeLine{940 }
\DoxyCodeLine{941     \textcolor{comment}{/* displacement texture */}}
\DoxyCodeLine{942     \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}disp"{}}, 4)) \&\& IS\_SPACE(token[4])) \{}
\DoxyCodeLine{943       token += 5;}
\DoxyCodeLine{944       material.displacement\_texname = my\_strdup(token, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (line\_end -\/ token));}
\DoxyCodeLine{945       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{946     \}}
\DoxyCodeLine{947 }
\DoxyCodeLine{948     \textcolor{comment}{/* @todo \{ unknown parameter \} */}}
\DoxyCodeLine{949   \}}
\DoxyCodeLine{950 }
\DoxyCodeLine{951   fclose(fp);}
\DoxyCodeLine{952 }
\DoxyCodeLine{953   \textcolor{keywordflow}{if} (material.name) \{}
\DoxyCodeLine{954     \textcolor{comment}{/* Flush last material element */}}
\DoxyCodeLine{955     materials = tinyobj\_material\_add(materials, num\_materials, \&material);}
\DoxyCodeLine{956     num\_materials++;}
\DoxyCodeLine{957   \}}
\DoxyCodeLine{958 }
\DoxyCodeLine{959   (*num\_materials\_out) = num\_materials;}
\DoxyCodeLine{960   (*materials\_out) = materials;}
\DoxyCodeLine{961 }
\DoxyCodeLine{962   \textcolor{keywordflow}{if} (linebuf) \{}
\DoxyCodeLine{963     TINYOBJ\_FREE(linebuf);}
\DoxyCodeLine{964   \}}
\DoxyCodeLine{965 }
\DoxyCodeLine{966   \textcolor{keywordflow}{return} TINYOBJ\_SUCCESS;}
\DoxyCodeLine{967 \}}
\DoxyCodeLine{968 }
\DoxyCodeLine{969 \textcolor{keywordtype}{int} tinyobj\_parse\_mtl\_file(\mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} **materials\_out,}
\DoxyCodeLine{970                            \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *num\_materials\_out,}
\DoxyCodeLine{971                            \textcolor{keyword}{const} \textcolor{keywordtype}{char} *filename) \{}
\DoxyCodeLine{972   \textcolor{keywordflow}{return} tinyobj\_parse\_and\_index\_mtl\_file(materials\_out, num\_materials\_out, filename, NULL);}
\DoxyCodeLine{973 \} }
\DoxyCodeLine{974 }
\DoxyCodeLine{975 }
\DoxyCodeLine{976 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{}
\DoxyCodeLine{977   COMMAND\_EMPTY,}
\DoxyCodeLine{978   COMMAND\_V,}
\DoxyCodeLine{979   COMMAND\_VN,}
\DoxyCodeLine{980   COMMAND\_VT,}
\DoxyCodeLine{981   COMMAND\_F,}
\DoxyCodeLine{982   COMMAND\_G,}
\DoxyCodeLine{983   COMMAND\_O,}
\DoxyCodeLine{984   COMMAND\_USEMTL,}
\DoxyCodeLine{985   COMMAND\_MTLLIB}
\DoxyCodeLine{986 }
\DoxyCodeLine{987 \} CommandType;}
\DoxyCodeLine{988 }
\DoxyCodeLine{989 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{990   \textcolor{keywordtype}{float} vx, vy, vz;}
\DoxyCodeLine{991   \textcolor{keywordtype}{float} nx, ny, nz;}
\DoxyCodeLine{992   \textcolor{keywordtype}{float} tx, ty;}
\DoxyCodeLine{993 }
\DoxyCodeLine{994   \textcolor{comment}{/* @todo \{ Use dynamic array \} */}}
\DoxyCodeLine{995   \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} f[TINYOBJ\_MAX\_FACES\_PER\_F\_LINE];}
\DoxyCodeLine{996   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_f;}
\DoxyCodeLine{997 }
\DoxyCodeLine{998   \textcolor{keywordtype}{int} f\_num\_verts[TINYOBJ\_MAX\_FACES\_PER\_F\_LINE];}
\DoxyCodeLine{999   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_f\_num\_verts;}
\DoxyCodeLine{1000 }
\DoxyCodeLine{1001   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *group\_name;}
\DoxyCodeLine{1002   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} group\_name\_len;}
\DoxyCodeLine{1003   \textcolor{keywordtype}{int} pad0;}
\DoxyCodeLine{1004 }
\DoxyCodeLine{1005   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *object\_name;}
\DoxyCodeLine{1006   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} object\_name\_len;}
\DoxyCodeLine{1007   \textcolor{keywordtype}{int} pad1;}
\DoxyCodeLine{1008 }
\DoxyCodeLine{1009   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *material\_name;}
\DoxyCodeLine{1010   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} material\_name\_len;}
\DoxyCodeLine{1011   \textcolor{keywordtype}{int} pad2;}
\DoxyCodeLine{1012 }
\DoxyCodeLine{1013   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *mtllib\_name;}
\DoxyCodeLine{1014   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} mtllib\_name\_len;}
\DoxyCodeLine{1015 }
\DoxyCodeLine{1016   CommandType type;}
\DoxyCodeLine{1017 \} Command;}
\DoxyCodeLine{1018 }
\DoxyCodeLine{1019 \textcolor{keyword}{static} \textcolor{keywordtype}{int} parseLine(Command *command, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *p, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} p\_len,}
\DoxyCodeLine{1020                      \textcolor{keywordtype}{int} triangulate) \{}
\DoxyCodeLine{1021   \textcolor{keywordtype}{char} linebuf[4096];}
\DoxyCodeLine{1022   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *token;}
\DoxyCodeLine{1023   assert(p\_len < 4095);}
\DoxyCodeLine{1024 }
\DoxyCodeLine{1025   memcpy(linebuf, p, p\_len);}
\DoxyCodeLine{1026   linebuf[p\_len] = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{1027 }
\DoxyCodeLine{1028   token = linebuf;}
\DoxyCodeLine{1029 }
\DoxyCodeLine{1030   command-\/>type = COMMAND\_EMPTY;}
\DoxyCodeLine{1031 }
\DoxyCodeLine{1032   \textcolor{comment}{/* Skip leading space. */}}
\DoxyCodeLine{1033   skip\_space(\&token);}
\DoxyCodeLine{1034 }
\DoxyCodeLine{1035   assert(token);}
\DoxyCodeLine{1036   \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'\(\backslash\)0'}) \{ \textcolor{comment}{/* empty line */}}
\DoxyCodeLine{1037     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1038   \}}
\DoxyCodeLine{1039 }
\DoxyCodeLine{1040   \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'\#'}) \{ \textcolor{comment}{/* comment line */}}
\DoxyCodeLine{1041     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1042   \}}
\DoxyCodeLine{1043 }
\DoxyCodeLine{1044   \textcolor{comment}{/* vertex */}}
\DoxyCodeLine{1045   \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'v'} \&\& IS\_SPACE((token[1]))) \{}
\DoxyCodeLine{1046     \textcolor{keywordtype}{float} x, y, z;}
\DoxyCodeLine{1047     token += 2;}
\DoxyCodeLine{1048     parseFloat3(\&x, \&y, \&z, \&token);}
\DoxyCodeLine{1049     command-\/>vx = x;}
\DoxyCodeLine{1050     command-\/>vy = y;}
\DoxyCodeLine{1051     command-\/>vz = z;}
\DoxyCodeLine{1052     command-\/>type = COMMAND\_V;}
\DoxyCodeLine{1053     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1054   \}}
\DoxyCodeLine{1055 }
\DoxyCodeLine{1056   \textcolor{comment}{/* normal */}}
\DoxyCodeLine{1057   \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'v'} \&\& token[1] == \textcolor{charliteral}{'n'} \&\& IS\_SPACE((token[2]))) \{}
\DoxyCodeLine{1058     \textcolor{keywordtype}{float} x, y, z;}
\DoxyCodeLine{1059     token += 3;}
\DoxyCodeLine{1060     parseFloat3(\&x, \&y, \&z, \&token);}
\DoxyCodeLine{1061     command-\/>nx = x;}
\DoxyCodeLine{1062     command-\/>ny = y;}
\DoxyCodeLine{1063     command-\/>nz = z;}
\DoxyCodeLine{1064     command-\/>type = COMMAND\_VN;}
\DoxyCodeLine{1065     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1066   \}}
\DoxyCodeLine{1067 }
\DoxyCodeLine{1068   \textcolor{comment}{/* texcoord */}}
\DoxyCodeLine{1069   \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'v'} \&\& token[1] == \textcolor{charliteral}{'t'} \&\& IS\_SPACE((token[2]))) \{}
\DoxyCodeLine{1070     \textcolor{keywordtype}{float} x, y;}
\DoxyCodeLine{1071     token += 3;}
\DoxyCodeLine{1072     parseFloat2(\&x, \&y, \&token);}
\DoxyCodeLine{1073     command-\/>tx = x;}
\DoxyCodeLine{1074     command-\/>ty = y;}
\DoxyCodeLine{1075     command-\/>type = COMMAND\_VT;}
\DoxyCodeLine{1076     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1077   \}}
\DoxyCodeLine{1078 }
\DoxyCodeLine{1079   \textcolor{comment}{/* face */}}
\DoxyCodeLine{1080   \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'f'} \&\& IS\_SPACE((token[1]))) \{}
\DoxyCodeLine{1081     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_f = 0;}
\DoxyCodeLine{1082 }
\DoxyCodeLine{1083     \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} f[TINYOBJ\_MAX\_FACES\_PER\_F\_LINE];}
\DoxyCodeLine{1084     token += 2;}
\DoxyCodeLine{1085     skip\_space(\&token);}
\DoxyCodeLine{1086 }
\DoxyCodeLine{1087     \textcolor{keywordflow}{while} (!IS\_NEW\_LINE(token[0])) \{}
\DoxyCodeLine{1088       \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} vi = parseRawTriple(\&token);}
\DoxyCodeLine{1089       skip\_space\_and\_cr(\&token);}
\DoxyCodeLine{1090 }
\DoxyCodeLine{1091       f[num\_f] = vi;}
\DoxyCodeLine{1092       num\_f++;}
\DoxyCodeLine{1093     \}}
\DoxyCodeLine{1094 }
\DoxyCodeLine{1095     command-\/>type = COMMAND\_F;}
\DoxyCodeLine{1096 }
\DoxyCodeLine{1097     \textcolor{keywordflow}{if} (triangulate) \{}
\DoxyCodeLine{1098       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{1099       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n = 0;}
\DoxyCodeLine{1100 }
\DoxyCodeLine{1101       \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} i0 = f[0];}
\DoxyCodeLine{1102       \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} i1;}
\DoxyCodeLine{1103       \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} i2 = f[1];}
\DoxyCodeLine{1104 }
\DoxyCodeLine{1105       assert(3 * num\_f < TINYOBJ\_MAX\_FACES\_PER\_F\_LINE);}
\DoxyCodeLine{1106 }
\DoxyCodeLine{1107       \textcolor{keywordflow}{for} (k = 2; k < num\_f; k++) \{}
\DoxyCodeLine{1108         i1 = i2;}
\DoxyCodeLine{1109         i2 = f[k];}
\DoxyCodeLine{1110         command-\/>f[3 * n + 0] = i0;}
\DoxyCodeLine{1111         command-\/>f[3 * n + 1] = i1;}
\DoxyCodeLine{1112         command-\/>f[3 * n + 2] = i2;}
\DoxyCodeLine{1113 }
\DoxyCodeLine{1114         command-\/>f\_num\_verts[n] = 3;}
\DoxyCodeLine{1115         n++;}
\DoxyCodeLine{1116       \}}
\DoxyCodeLine{1117       command-\/>num\_f = 3 * n;}
\DoxyCodeLine{1118       command-\/>num\_f\_num\_verts = n;}
\DoxyCodeLine{1119 }
\DoxyCodeLine{1120     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1121       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k = 0;}
\DoxyCodeLine{1122       assert(num\_f < TINYOBJ\_MAX\_FACES\_PER\_F\_LINE);}
\DoxyCodeLine{1123       \textcolor{keywordflow}{for} (k = 0; k < num\_f; k++) \{}
\DoxyCodeLine{1124         command-\/>f[k] = f[k];}
\DoxyCodeLine{1125       \}}
\DoxyCodeLine{1126 }
\DoxyCodeLine{1127       command-\/>num\_f = num\_f;}
\DoxyCodeLine{1128       command-\/>f\_num\_verts[0] = (int)num\_f;}
\DoxyCodeLine{1129       command-\/>num\_f\_num\_verts = 1;}
\DoxyCodeLine{1130     \}}
\DoxyCodeLine{1131 }
\DoxyCodeLine{1132     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1133   \}}
\DoxyCodeLine{1134 }
\DoxyCodeLine{1135   \textcolor{comment}{/* use mtl */}}
\DoxyCodeLine{1136   \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}usemtl"{}}, 6)) \&\& IS\_SPACE((token[6]))) \{}
\DoxyCodeLine{1137     token += 7;}
\DoxyCodeLine{1138 }
\DoxyCodeLine{1139     skip\_space(\&token);}
\DoxyCodeLine{1140     command-\/>material\_name = p + (token -\/ linebuf);}
\DoxyCodeLine{1141     command-\/>material\_name\_len = (\textcolor{keywordtype}{unsigned} int)length\_until\_newline(}
\DoxyCodeLine{1142                                                                     token, (p\_len -\/ (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int})(token -\/ linebuf)) + 1);}
\DoxyCodeLine{1143     command-\/>type = COMMAND\_USEMTL;}
\DoxyCodeLine{1144 }
\DoxyCodeLine{1145     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1146   \}}
\DoxyCodeLine{1147 }
\DoxyCodeLine{1148   \textcolor{comment}{/* load mtl */}}
\DoxyCodeLine{1149   \textcolor{keywordflow}{if} ((0 == strncmp(token, \textcolor{stringliteral}{"{}mtllib"{}}, 6)) \&\& IS\_SPACE((token[6]))) \{}
\DoxyCodeLine{1150     \textcolor{comment}{/* By specification, `mtllib` should be appear only once in .obj */}}
\DoxyCodeLine{1151     token += 7;}
\DoxyCodeLine{1152 }
\DoxyCodeLine{1153     skip\_space(\&token);}
\DoxyCodeLine{1154     command-\/>mtllib\_name = p + (token -\/ linebuf);}
\DoxyCodeLine{1155     command-\/>mtllib\_name\_len = (\textcolor{keywordtype}{unsigned} int)length\_until\_newline(}
\DoxyCodeLine{1156                                                                   token, p\_len -\/ (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int})(token -\/ linebuf)) +}
\DoxyCodeLine{1157       1;}
\DoxyCodeLine{1158     command-\/>type = COMMAND\_MTLLIB;}
\DoxyCodeLine{1159 }
\DoxyCodeLine{1160     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1161   \}}
\DoxyCodeLine{1162 }
\DoxyCodeLine{1163   \textcolor{comment}{/* group name */}}
\DoxyCodeLine{1164   \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'g'} \&\& IS\_SPACE((token[1]))) \{}
\DoxyCodeLine{1165     \textcolor{comment}{/* @todo \{ multiple group name. \} */}}
\DoxyCodeLine{1166     token += 2;}
\DoxyCodeLine{1167 }
\DoxyCodeLine{1168     command-\/>group\_name = p + (token -\/ linebuf);}
\DoxyCodeLine{1169     command-\/>group\_name\_len = (\textcolor{keywordtype}{unsigned} int)length\_until\_newline(}
\DoxyCodeLine{1170                                                                  token, p\_len -\/ (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int})(token -\/ linebuf)) +}
\DoxyCodeLine{1171       1;}
\DoxyCodeLine{1172     command-\/>type = COMMAND\_G;}
\DoxyCodeLine{1173 }
\DoxyCodeLine{1174     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1175   \}}
\DoxyCodeLine{1176 }
\DoxyCodeLine{1177   \textcolor{comment}{/* object name */}}
\DoxyCodeLine{1178   \textcolor{keywordflow}{if} (token[0] == \textcolor{charliteral}{'o'} \&\& IS\_SPACE((token[1]))) \{}
\DoxyCodeLine{1179     \textcolor{comment}{/* @todo \{ multiple object name? \} */}}
\DoxyCodeLine{1180     token += 2;}
\DoxyCodeLine{1181 }
\DoxyCodeLine{1182     command-\/>object\_name = p + (token -\/ linebuf);}
\DoxyCodeLine{1183     command-\/>object\_name\_len = (\textcolor{keywordtype}{unsigned} int)length\_until\_newline(}
\DoxyCodeLine{1184                                                                   token, p\_len -\/ (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int})(token -\/ linebuf)) +}
\DoxyCodeLine{1185       1;}
\DoxyCodeLine{1186     command-\/>type = COMMAND\_O;}
\DoxyCodeLine{1187 }
\DoxyCodeLine{1188     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1189   \}}
\DoxyCodeLine{1190 }
\DoxyCodeLine{1191   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1192 \}}
\DoxyCodeLine{1193 }
\DoxyCodeLine{1194 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{1195   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} pos;}
\DoxyCodeLine{1196   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len;}
\DoxyCodeLine{1197 \} LineInfo;}
\DoxyCodeLine{1198 }
\DoxyCodeLine{1199 \textcolor{keyword}{static} \textcolor{keywordtype}{int} is\_line\_ending(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *p, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} end\_i) \{}
\DoxyCodeLine{1200   \textcolor{keywordflow}{if} (p[i] == \textcolor{charliteral}{'\(\backslash\)0'}) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1201   \textcolor{keywordflow}{if} (p[i] == \textcolor{charliteral}{'\(\backslash\)n'}) \textcolor{keywordflow}{return} 1; \textcolor{comment}{/* this includes \(\backslash\)r\(\backslash\)n */}}
\DoxyCodeLine{1202   \textcolor{keywordflow}{if} (p[i] == \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{1203     \textcolor{keywordflow}{if} (((i + 1) < end\_i) \&\& (p[i + 1] != \textcolor{charliteral}{'\(\backslash\)n'})) \{ \textcolor{comment}{/* detect only \(\backslash\)r case */}}
\DoxyCodeLine{1204       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1205     \}}
\DoxyCodeLine{1206   \}}
\DoxyCodeLine{1207   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1208 \}}
\DoxyCodeLine{1209 }
\DoxyCodeLine{1210 \textcolor{keywordtype}{int} tinyobj\_parse\_obj(\mbox{\hyperlink{structtinyobj__attrib__t}{tinyobj\_attrib\_t}} *attrib, \mbox{\hyperlink{structtinyobj__shape__t}{tinyobj\_shape\_t}} **shapes,}
\DoxyCodeLine{1211                       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *num\_shapes, \mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} **materials\_out,}
\DoxyCodeLine{1212                       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *num\_materials\_out, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *buf, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len,}
\DoxyCodeLine{1213                       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} flags) \{}
\DoxyCodeLine{1214   LineInfo *line\_infos = NULL;}
\DoxyCodeLine{1215   Command *commands = NULL;}
\DoxyCodeLine{1216   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_lines = 0;}
\DoxyCodeLine{1217 }
\DoxyCodeLine{1218   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_v = 0;}
\DoxyCodeLine{1219   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_vn = 0;}
\DoxyCodeLine{1220   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_vt = 0;}
\DoxyCodeLine{1221   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_f = 0;}
\DoxyCodeLine{1222   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_faces = 0;}
\DoxyCodeLine{1223 }
\DoxyCodeLine{1224   \textcolor{keywordtype}{int} mtllib\_line\_index = -\/1;}
\DoxyCodeLine{1225 }
\DoxyCodeLine{1226   \mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *materials = NULL;}
\DoxyCodeLine{1227   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_materials = 0;}
\DoxyCodeLine{1228 }
\DoxyCodeLine{1229   hash\_table\_t material\_table;}
\DoxyCodeLine{1230 }
\DoxyCodeLine{1231   \textcolor{keywordflow}{if} (len < 1) \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_INVALID\_PARAMETER;}
\DoxyCodeLine{1232   \textcolor{keywordflow}{if} (attrib == NULL) \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_INVALID\_PARAMETER;}
\DoxyCodeLine{1233   \textcolor{keywordflow}{if} (shapes == NULL) \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_INVALID\_PARAMETER;}
\DoxyCodeLine{1234   \textcolor{keywordflow}{if} (num\_shapes == NULL) \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_INVALID\_PARAMETER;}
\DoxyCodeLine{1235   \textcolor{keywordflow}{if} (buf == NULL) \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_INVALID\_PARAMETER;}
\DoxyCodeLine{1236   \textcolor{keywordflow}{if} (materials\_out == NULL) \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_INVALID\_PARAMETER;}
\DoxyCodeLine{1237   \textcolor{keywordflow}{if} (num\_materials\_out == NULL) \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_INVALID\_PARAMETER;}
\DoxyCodeLine{1238 }
\DoxyCodeLine{1239   tinyobj\_attrib\_init(attrib);}
\DoxyCodeLine{1240    \textcolor{comment}{/* 1. Find '\(\backslash\)n' and create line data. */}}
\DoxyCodeLine{1241   \{}
\DoxyCodeLine{1242     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{1243     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} end\_idx = len;}
\DoxyCodeLine{1244     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} prev\_pos = 0;}
\DoxyCodeLine{1245     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} line\_no = 0;}
\DoxyCodeLine{1246     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} last\_line\_ending = 0;}
\DoxyCodeLine{1247 }
\DoxyCodeLine{1248     \textcolor{comment}{/* Count \# of lines. */}}
\DoxyCodeLine{1249     \textcolor{keywordflow}{for} (i = 0; i < end\_idx; i++) \{}
\DoxyCodeLine{1250       \textcolor{keywordflow}{if} (is\_line\_ending(buf, i, end\_idx)) \{}
\DoxyCodeLine{1251         num\_lines++;}
\DoxyCodeLine{1252         last\_line\_ending = i;}
\DoxyCodeLine{1253       \}}
\DoxyCodeLine{1254     \}}
\DoxyCodeLine{1255     \textcolor{comment}{/* The last char from the input may not be a line}}
\DoxyCodeLine{1256 \textcolor{comment}{     * ending character so add an extra line if there}}
\DoxyCodeLine{1257 \textcolor{comment}{     * are more characters after the last line ending}}
\DoxyCodeLine{1258 \textcolor{comment}{     * that was found. */}}
\DoxyCodeLine{1259     \textcolor{keywordflow}{if} (end\_idx -\/ last\_line\_ending > 0) \{}
\DoxyCodeLine{1260         num\_lines++;}
\DoxyCodeLine{1261     \}}
\DoxyCodeLine{1262 }
\DoxyCodeLine{1263     \textcolor{keywordflow}{if} (num\_lines == 0) \textcolor{keywordflow}{return} TINYOBJ\_ERROR\_EMPTY;}
\DoxyCodeLine{1264 }
\DoxyCodeLine{1265     line\_infos = (LineInfo *)TINYOBJ\_MALLOC(\textcolor{keyword}{sizeof}(LineInfo) * num\_lines);}
\DoxyCodeLine{1266 }
\DoxyCodeLine{1267     \textcolor{comment}{/* Fill line infos. */}}
\DoxyCodeLine{1268     \textcolor{keywordflow}{for} (i = 0; i < end\_idx; i++) \{}
\DoxyCodeLine{1269       \textcolor{keywordflow}{if} (is\_line\_ending(buf, i, end\_idx)) \{}
\DoxyCodeLine{1270         line\_infos[line\_no].pos = prev\_pos;}
\DoxyCodeLine{1271         line\_infos[line\_no].len = i -\/ prev\_pos;}
\DoxyCodeLine{1272         prev\_pos = i + 1;}
\DoxyCodeLine{1273         line\_no++;}
\DoxyCodeLine{1274       \}}
\DoxyCodeLine{1275     \}}
\DoxyCodeLine{1276     \textcolor{keywordflow}{if} (end\_idx -\/ last\_line\_ending > 0) \{}
\DoxyCodeLine{1277       line\_infos[line\_no].pos = prev\_pos;}
\DoxyCodeLine{1278       line\_infos[line\_no].len = end\_idx -\/ 1 -\/ last\_line\_ending;}
\DoxyCodeLine{1279     \}}
\DoxyCodeLine{1280   \}}
\DoxyCodeLine{1281 }
\DoxyCodeLine{1282   commands = (Command *)TINYOBJ\_MALLOC(\textcolor{keyword}{sizeof}(Command) * num\_lines); }
\DoxyCodeLine{1283 }
\DoxyCodeLine{1284   create\_hash\_table(HASH\_TABLE\_DEFAULT\_SIZE, \&material\_table);}
\DoxyCodeLine{1285 }
\DoxyCodeLine{1286   \textcolor{comment}{/* 2. parse each line */}}
\DoxyCodeLine{1287   \{}
\DoxyCodeLine{1288     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{1289     \textcolor{keywordflow}{for} (i = 0; i < num\_lines; i++) \{}
\DoxyCodeLine{1290       \textcolor{keywordtype}{int} ret = parseLine(\&commands[i], \&buf[line\_infos[i].pos],}
\DoxyCodeLine{1291                           line\_infos[i].len, flags \& TINYOBJ\_FLAG\_TRIANGULATE);}
\DoxyCodeLine{1292       \textcolor{keywordflow}{if} (ret) \{}
\DoxyCodeLine{1293         \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_V) \{}
\DoxyCodeLine{1294           num\_v++;}
\DoxyCodeLine{1295         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_VN) \{}
\DoxyCodeLine{1296           num\_vn++;}
\DoxyCodeLine{1297         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_VT) \{}
\DoxyCodeLine{1298           num\_vt++;}
\DoxyCodeLine{1299         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_F) \{}
\DoxyCodeLine{1300           num\_f += commands[i].num\_f;}
\DoxyCodeLine{1301           num\_faces += commands[i].num\_f\_num\_verts;}
\DoxyCodeLine{1302         \}}
\DoxyCodeLine{1303 }
\DoxyCodeLine{1304         \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_MTLLIB) \{}
\DoxyCodeLine{1305           mtllib\_line\_index = (int)i;}
\DoxyCodeLine{1306         \}}
\DoxyCodeLine{1307       \}}
\DoxyCodeLine{1308     \}}
\DoxyCodeLine{1309   \}}
\DoxyCodeLine{1310 }
\DoxyCodeLine{1311   \textcolor{comment}{/* line\_infos are not used anymore. Release memory. */}}
\DoxyCodeLine{1312   \textcolor{keywordflow}{if} (line\_infos) \{}
\DoxyCodeLine{1313     TINYOBJ\_FREE(line\_infos);}
\DoxyCodeLine{1314   \}}
\DoxyCodeLine{1315 }
\DoxyCodeLine{1316   \textcolor{comment}{/* Load material(if exits) */}}
\DoxyCodeLine{1317   \textcolor{keywordflow}{if} (mtllib\_line\_index >= 0 \&\& commands[mtllib\_line\_index].mtllib\_name \&\&}
\DoxyCodeLine{1318       commands[mtllib\_line\_index].mtllib\_name\_len > 0) \{}
\DoxyCodeLine{1319     \textcolor{keywordtype}{char} *filename = my\_strndup(commands[mtllib\_line\_index].mtllib\_name,}
\DoxyCodeLine{1320                                 commands[mtllib\_line\_index].mtllib\_name\_len);}
\DoxyCodeLine{1321 }
\DoxyCodeLine{1322     \textcolor{keywordtype}{int} ret = tinyobj\_parse\_and\_index\_mtl\_file(\&materials, \&num\_materials, filename, \&material\_table);}
\DoxyCodeLine{1323 }
\DoxyCodeLine{1324     \textcolor{keywordflow}{if} (ret != TINYOBJ\_SUCCESS) \{}
\DoxyCodeLine{1325       \textcolor{comment}{/* warning. */}}
\DoxyCodeLine{1326       fprintf(stderr, \textcolor{stringliteral}{"{}TINYOBJ: Failed to parse material file '\%s': \%d\(\backslash\)n"{}}, filename, ret);}
\DoxyCodeLine{1327     \}}
\DoxyCodeLine{1328 }
\DoxyCodeLine{1329     TINYOBJ\_FREE(filename);}
\DoxyCodeLine{1330 }
\DoxyCodeLine{1331   \}}
\DoxyCodeLine{1332 }
\DoxyCodeLine{1333   \textcolor{comment}{/* Construct attributes */}}
\DoxyCodeLine{1334 }
\DoxyCodeLine{1335   \{}
\DoxyCodeLine{1336     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v\_count = 0;}
\DoxyCodeLine{1337     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n\_count = 0;}
\DoxyCodeLine{1338     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} t\_count = 0;}
\DoxyCodeLine{1339     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} f\_count = 0;}
\DoxyCodeLine{1340     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} face\_count = 0;}
\DoxyCodeLine{1341     \textcolor{keywordtype}{int} material\_id = -\/1; \textcolor{comment}{/* -\/1 = default unknown material. */}}
\DoxyCodeLine{1342     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{1343 }
\DoxyCodeLine{1344     attrib-\/>vertices = (\textcolor{keywordtype}{float} *)TINYOBJ\_MALLOC(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}) * num\_v * 3);}
\DoxyCodeLine{1345     attrib-\/>num\_vertices = (\textcolor{keywordtype}{unsigned} int)num\_v;}
\DoxyCodeLine{1346     attrib-\/>normals = (\textcolor{keywordtype}{float} *)TINYOBJ\_MALLOC(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}) * num\_vn * 3);}
\DoxyCodeLine{1347     attrib-\/>num\_normals = (\textcolor{keywordtype}{unsigned} int)num\_vn;}
\DoxyCodeLine{1348     attrib-\/>texcoords = (\textcolor{keywordtype}{float} *)TINYOBJ\_MALLOC(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}) * num\_vt * 2);}
\DoxyCodeLine{1349     attrib-\/>num\_texcoords = (\textcolor{keywordtype}{unsigned} int)num\_vt;}
\DoxyCodeLine{1350     attrib-\/>faces = (\mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} *)TINYOBJ\_MALLOC(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}}) * num\_f);}
\DoxyCodeLine{1351     attrib-\/>face\_num\_verts = (\textcolor{keywordtype}{int} *)TINYOBJ\_MALLOC(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}) * num\_faces);}
\DoxyCodeLine{1352     }
\DoxyCodeLine{1353     attrib-\/>num\_faces = (\textcolor{keywordtype}{unsigned} int)num\_faces;}
\DoxyCodeLine{1354     attrib-\/>num\_face\_num\_verts = (\textcolor{keywordtype}{unsigned} int)num\_f;}
\DoxyCodeLine{1355     }
\DoxyCodeLine{1356     attrib-\/>material\_ids = (\textcolor{keywordtype}{int} *)TINYOBJ\_MALLOC(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}) * num\_faces);}
\DoxyCodeLine{1357 }
\DoxyCodeLine{1358     \textcolor{keywordflow}{for} (i = 0; i < num\_lines; i++) \{}
\DoxyCodeLine{1359       \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_EMPTY) \{}
\DoxyCodeLine{1360         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1361       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_USEMTL) \{}
\DoxyCodeLine{1362         \textcolor{comment}{/* @todo}}
\DoxyCodeLine{1363 \textcolor{comment}{           if (commands[t][i].material\_name \&\&}}
\DoxyCodeLine{1364 \textcolor{comment}{           commands[t][i].material\_name\_len > 0) \{}}
\DoxyCodeLine{1365 \textcolor{comment}{           std::string material\_name(commands[t][i].material\_name,}}
\DoxyCodeLine{1366 \textcolor{comment}{           commands[t][i].material\_name\_len);}}
\DoxyCodeLine{1367 \textcolor{comment}{}}
\DoxyCodeLine{1368 \textcolor{comment}{           if (material\_map.find(material\_name) != material\_map.end()) \{}}
\DoxyCodeLine{1369 \textcolor{comment}{           material\_id = material\_map[material\_name];}}
\DoxyCodeLine{1370 \textcolor{comment}{           \} else \{}}
\DoxyCodeLine{1371 \textcolor{comment}{        // Assign invalid material ID}}
\DoxyCodeLine{1372 \textcolor{comment}{        material\_id = -\/1;}}
\DoxyCodeLine{1373 \textcolor{comment}{        \}}}
\DoxyCodeLine{1374 \textcolor{comment}{        \}}}
\DoxyCodeLine{1375 \textcolor{comment}{        */}}
\DoxyCodeLine{1376         \textcolor{keywordflow}{if} (commands[i].material\_name \&\&}
\DoxyCodeLine{1377            commands[i].material\_name\_len >0) }
\DoxyCodeLine{1378         \{}
\DoxyCodeLine{1379           \textcolor{comment}{/* Create a null terminated string */}}
\DoxyCodeLine{1380           \textcolor{keywordtype}{char}* material\_name\_null\_term = (\textcolor{keywordtype}{char}*) TINYOBJ\_MALLOC(commands[i].material\_name\_len + 1);}
\DoxyCodeLine{1381           memcpy((\textcolor{keywordtype}{void}*) material\_name\_null\_term, (\textcolor{keyword}{const} \textcolor{keywordtype}{void}*) commands[i].material\_name, commands[i].material\_name\_len);}
\DoxyCodeLine{1382           material\_name\_null\_term[commands[i].material\_name\_len] = 0;}
\DoxyCodeLine{1383 }
\DoxyCodeLine{1384           \textcolor{keywordflow}{if} (hash\_table\_exists(material\_name\_null\_term, \&material\_table))}
\DoxyCodeLine{1385             material\_id = (int)hash\_table\_get(material\_name\_null\_term, \&material\_table);}
\DoxyCodeLine{1386           \textcolor{keywordflow}{else}}
\DoxyCodeLine{1387             material\_id = -\/1;}
\DoxyCodeLine{1388 }
\DoxyCodeLine{1389           TINYOBJ\_FREE(material\_name\_null\_term);}
\DoxyCodeLine{1390         \}}
\DoxyCodeLine{1391       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_V) \{}
\DoxyCodeLine{1392         attrib-\/>vertices[3 * v\_count + 0] = commands[i].vx;}
\DoxyCodeLine{1393         attrib-\/>vertices[3 * v\_count + 1] = commands[i].vy;}
\DoxyCodeLine{1394         attrib-\/>vertices[3 * v\_count + 2] = commands[i].vz;}
\DoxyCodeLine{1395         v\_count++;}
\DoxyCodeLine{1396       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_VN) \{}
\DoxyCodeLine{1397         attrib-\/>normals[3 * n\_count + 0] = commands[i].nx;}
\DoxyCodeLine{1398         attrib-\/>normals[3 * n\_count + 1] = commands[i].ny;}
\DoxyCodeLine{1399         attrib-\/>normals[3 * n\_count + 2] = commands[i].nz;}
\DoxyCodeLine{1400         n\_count++;}
\DoxyCodeLine{1401       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_VT) \{}
\DoxyCodeLine{1402         attrib-\/>texcoords[2 * t\_count + 0] = commands[i].tx;}
\DoxyCodeLine{1403         attrib-\/>texcoords[2 * t\_count + 1] = commands[i].ty;}
\DoxyCodeLine{1404         t\_count++;}
\DoxyCodeLine{1405       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_F) \{}
\DoxyCodeLine{1406         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k = 0;}
\DoxyCodeLine{1407         \textcolor{keywordflow}{for} (k = 0; k < commands[i].num\_f; k++) \{}
\DoxyCodeLine{1408           \mbox{\hyperlink{structtinyobj__vertex__index__t}{tinyobj\_vertex\_index\_t}} vi = commands[i].f[k];}
\DoxyCodeLine{1409           \textcolor{keywordtype}{int} v\_idx = fixIndex(vi.v\_idx, v\_count);}
\DoxyCodeLine{1410           \textcolor{keywordtype}{int} vn\_idx = fixIndex(vi.vn\_idx, n\_count);}
\DoxyCodeLine{1411           \textcolor{keywordtype}{int} vt\_idx = fixIndex(vi.vt\_idx, t\_count);}
\DoxyCodeLine{1412           attrib-\/>faces[f\_count + k].v\_idx = v\_idx;}
\DoxyCodeLine{1413           attrib-\/>faces[f\_count + k].vn\_idx = vn\_idx;}
\DoxyCodeLine{1414           attrib-\/>faces[f\_count + k].vt\_idx = vt\_idx;}
\DoxyCodeLine{1415         \}}
\DoxyCodeLine{1416 }
\DoxyCodeLine{1417         \textcolor{keywordflow}{for} (k = 0; k < commands[i].num\_f\_num\_verts; k++) \{}
\DoxyCodeLine{1418           attrib-\/>material\_ids[face\_count + k] = material\_id;}
\DoxyCodeLine{1419           attrib-\/>face\_num\_verts[face\_count + k] = commands[i].f\_num\_verts[k];}
\DoxyCodeLine{1420         \}}
\DoxyCodeLine{1421 }
\DoxyCodeLine{1422         f\_count += commands[i].num\_f;}
\DoxyCodeLine{1423         face\_count += commands[i].num\_f\_num\_verts;}
\DoxyCodeLine{1424       \}}
\DoxyCodeLine{1425     \}}
\DoxyCodeLine{1426   \}}
\DoxyCodeLine{1427 }
\DoxyCodeLine{1428   \textcolor{comment}{/* 5. Construct shape information. */}}
\DoxyCodeLine{1429   \{}
\DoxyCodeLine{1430     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} face\_count = 0;}
\DoxyCodeLine{1431     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{1432     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n = 0;}
\DoxyCodeLine{1433     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} shape\_idx = 0;}
\DoxyCodeLine{1434 }
\DoxyCodeLine{1435     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *shape\_name = NULL;}
\DoxyCodeLine{1436     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} shape\_name\_len = 0;}
\DoxyCodeLine{1437     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *prev\_shape\_name = NULL;}
\DoxyCodeLine{1438     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} prev\_shape\_name\_len = 0;}
\DoxyCodeLine{1439     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} prev\_shape\_face\_offset = 0;}
\DoxyCodeLine{1440     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} prev\_face\_offset = 0;}
\DoxyCodeLine{1441     \mbox{\hyperlink{structtinyobj__shape__t}{tinyobj\_shape\_t}} prev\_shape = \{NULL, 0, 0\};}
\DoxyCodeLine{1442 }
\DoxyCodeLine{1443     \textcolor{comment}{/* Find the number of shapes in .obj */}}
\DoxyCodeLine{1444     \textcolor{keywordflow}{for} (i = 0; i < num\_lines; i++) \{}
\DoxyCodeLine{1445       \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_O || commands[i].type == COMMAND\_G) \{}
\DoxyCodeLine{1446         n++;}
\DoxyCodeLine{1447       \}}
\DoxyCodeLine{1448     \}}
\DoxyCodeLine{1449 }
\DoxyCodeLine{1450     \textcolor{comment}{/* Allocate array of shapes with maximum possible size(+1 for unnamed}}
\DoxyCodeLine{1451 \textcolor{comment}{     * group/object).}}
\DoxyCodeLine{1452 \textcolor{comment}{     * Actual \# of shapes found in .obj is determined in the later */}}
\DoxyCodeLine{1453     (*shapes) = (\mbox{\hyperlink{structtinyobj__shape__t}{tinyobj\_shape\_t}}*)TINYOBJ\_MALLOC(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structtinyobj__shape__t}{tinyobj\_shape\_t}}) * (n + 1));}
\DoxyCodeLine{1454 }
\DoxyCodeLine{1455     \textcolor{keywordflow}{for} (i = 0; i < num\_lines; i++) \{}
\DoxyCodeLine{1456       \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_O || commands[i].type == COMMAND\_G) \{}
\DoxyCodeLine{1457         \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_O) \{}
\DoxyCodeLine{1458           shape\_name = commands[i].object\_name;}
\DoxyCodeLine{1459           shape\_name\_len = commands[i].object\_name\_len;}
\DoxyCodeLine{1460         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1461           shape\_name = commands[i].group\_name;}
\DoxyCodeLine{1462           shape\_name\_len = commands[i].group\_name\_len;}
\DoxyCodeLine{1463         \}}
\DoxyCodeLine{1464 }
\DoxyCodeLine{1465         \textcolor{keywordflow}{if} (face\_count == 0) \{}
\DoxyCodeLine{1466           \textcolor{comment}{/* 'o' or 'g' appears before any 'f' */}}
\DoxyCodeLine{1467           prev\_shape\_name = shape\_name;}
\DoxyCodeLine{1468           prev\_shape\_name\_len = shape\_name\_len;}
\DoxyCodeLine{1469           prev\_shape\_face\_offset = face\_count;}
\DoxyCodeLine{1470           prev\_face\_offset = face\_count;}
\DoxyCodeLine{1471         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1472           \textcolor{keywordflow}{if} (shape\_idx == 0) \{}
\DoxyCodeLine{1473             \textcolor{comment}{/* 'o' or 'g' after some 'v' lines. */}}
\DoxyCodeLine{1474             (*shapes)[shape\_idx].name = my\_strndup(}
\DoxyCodeLine{1475                                                    prev\_shape\_name, prev\_shape\_name\_len); \textcolor{comment}{/* may be NULL */}}
\DoxyCodeLine{1476             (*shapes)[shape\_idx].face\_offset = prev\_shape.face\_offset;}
\DoxyCodeLine{1477             (*shapes)[shape\_idx].length = face\_count -\/ prev\_face\_offset;}
\DoxyCodeLine{1478             shape\_idx++;}
\DoxyCodeLine{1479 }
\DoxyCodeLine{1480             prev\_face\_offset = face\_count;}
\DoxyCodeLine{1481 }
\DoxyCodeLine{1482           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1483             \textcolor{keywordflow}{if} ((face\_count -\/ prev\_face\_offset) > 0) \{}
\DoxyCodeLine{1484               (*shapes)[shape\_idx].name =}
\DoxyCodeLine{1485                 my\_strndup(prev\_shape\_name, prev\_shape\_name\_len);}
\DoxyCodeLine{1486               (*shapes)[shape\_idx].face\_offset = prev\_face\_offset;}
\DoxyCodeLine{1487               (*shapes)[shape\_idx].length = face\_count -\/ prev\_face\_offset;}
\DoxyCodeLine{1488               shape\_idx++;}
\DoxyCodeLine{1489               prev\_face\_offset = face\_count;}
\DoxyCodeLine{1490             \}}
\DoxyCodeLine{1491           \}}
\DoxyCodeLine{1492 }
\DoxyCodeLine{1493           \textcolor{comment}{/* Record shape info for succeeding 'o' or 'g' command. */}}
\DoxyCodeLine{1494           prev\_shape\_name = shape\_name;}
\DoxyCodeLine{1495           prev\_shape\_name\_len = shape\_name\_len;}
\DoxyCodeLine{1496           prev\_shape\_face\_offset = face\_count;}
\DoxyCodeLine{1497         \}}
\DoxyCodeLine{1498       \}}
\DoxyCodeLine{1499       \textcolor{keywordflow}{if} (commands[i].type == COMMAND\_F) \{}
\DoxyCodeLine{1500         face\_count++;}
\DoxyCodeLine{1501       \}}
\DoxyCodeLine{1502     \}}
\DoxyCodeLine{1503 }
\DoxyCodeLine{1504     \textcolor{keywordflow}{if} ((face\_count -\/ prev\_face\_offset) > 0) \{}
\DoxyCodeLine{1505       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} length = face\_count -\/ prev\_shape\_face\_offset;}
\DoxyCodeLine{1506       \textcolor{keywordflow}{if} (length > 0) \{}
\DoxyCodeLine{1507         (*shapes)[shape\_idx].name =}
\DoxyCodeLine{1508           my\_strndup(prev\_shape\_name, prev\_shape\_name\_len);}
\DoxyCodeLine{1509         (*shapes)[shape\_idx].face\_offset = prev\_face\_offset;}
\DoxyCodeLine{1510         (*shapes)[shape\_idx].length = face\_count -\/ prev\_face\_offset;}
\DoxyCodeLine{1511         shape\_idx++;}
\DoxyCodeLine{1512       \}}
\DoxyCodeLine{1513     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1514       \textcolor{comment}{/* Guess no 'v' line occurrence after 'o' or 'g', so discards current}}
\DoxyCodeLine{1515 \textcolor{comment}{       * shape information. */}}
\DoxyCodeLine{1516     \}}
\DoxyCodeLine{1517 }
\DoxyCodeLine{1518     (*num\_shapes) = shape\_idx;}
\DoxyCodeLine{1519   \}}
\DoxyCodeLine{1520 }
\DoxyCodeLine{1521   \textcolor{keywordflow}{if} (commands) \{}
\DoxyCodeLine{1522     TINYOBJ\_FREE(commands);}
\DoxyCodeLine{1523   \}}
\DoxyCodeLine{1524 }
\DoxyCodeLine{1525   destroy\_hash\_table(\&material\_table);}
\DoxyCodeLine{1526   }
\DoxyCodeLine{1527   (*materials\_out) = materials;}
\DoxyCodeLine{1528   (*num\_materials\_out) = num\_materials;}
\DoxyCodeLine{1529 }
\DoxyCodeLine{1530   \textcolor{keywordflow}{return} TINYOBJ\_SUCCESS;}
\DoxyCodeLine{1531 \}}
\DoxyCodeLine{1532 }
\DoxyCodeLine{1533 \textcolor{keywordtype}{void} tinyobj\_attrib\_init(\mbox{\hyperlink{structtinyobj__attrib__t}{tinyobj\_attrib\_t}} *attrib) \{}
\DoxyCodeLine{1534   attrib-\/>vertices = NULL;}
\DoxyCodeLine{1535   attrib-\/>num\_vertices = 0;}
\DoxyCodeLine{1536   attrib-\/>normals = NULL;}
\DoxyCodeLine{1537   attrib-\/>num\_normals = 0;}
\DoxyCodeLine{1538   attrib-\/>texcoords = NULL;}
\DoxyCodeLine{1539   attrib-\/>num\_texcoords = 0;}
\DoxyCodeLine{1540   attrib-\/>faces = NULL;}
\DoxyCodeLine{1541   attrib-\/>num\_faces = 0;}
\DoxyCodeLine{1542   attrib-\/>face\_num\_verts = NULL;}
\DoxyCodeLine{1543   attrib-\/>num\_face\_num\_verts = 0;}
\DoxyCodeLine{1544   attrib-\/>material\_ids = NULL;}
\DoxyCodeLine{1545 \}}
\DoxyCodeLine{1546 }
\DoxyCodeLine{1547 \textcolor{keywordtype}{void} tinyobj\_attrib\_free(\mbox{\hyperlink{structtinyobj__attrib__t}{tinyobj\_attrib\_t}} *attrib) \{}
\DoxyCodeLine{1548   \textcolor{keywordflow}{if} (attrib-\/>vertices) TINYOBJ\_FREE(attrib-\/>vertices);}
\DoxyCodeLine{1549   \textcolor{keywordflow}{if} (attrib-\/>normals) TINYOBJ\_FREE(attrib-\/>normals);}
\DoxyCodeLine{1550   \textcolor{keywordflow}{if} (attrib-\/>texcoords) TINYOBJ\_FREE(attrib-\/>texcoords);}
\DoxyCodeLine{1551   \textcolor{keywordflow}{if} (attrib-\/>faces) TINYOBJ\_FREE(attrib-\/>faces);}
\DoxyCodeLine{1552   \textcolor{keywordflow}{if} (attrib-\/>face\_num\_verts) TINYOBJ\_FREE(attrib-\/>face\_num\_verts);}
\DoxyCodeLine{1553   \textcolor{keywordflow}{if} (attrib-\/>material\_ids) TINYOBJ\_FREE(attrib-\/>material\_ids);}
\DoxyCodeLine{1554 \}}
\DoxyCodeLine{1555 }
\DoxyCodeLine{1556 \textcolor{keywordtype}{void} tinyobj\_shapes\_free(\mbox{\hyperlink{structtinyobj__shape__t}{tinyobj\_shape\_t}} *shapes, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_shapes) \{}
\DoxyCodeLine{1557   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{1558   \textcolor{keywordflow}{if} (shapes == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1559 }
\DoxyCodeLine{1560   \textcolor{keywordflow}{for} (i = 0; i < num\_shapes; i++) \{}
\DoxyCodeLine{1561     \textcolor{keywordflow}{if} (shapes[i].name) TINYOBJ\_FREE(shapes[i].name);}
\DoxyCodeLine{1562   \}}
\DoxyCodeLine{1563 }
\DoxyCodeLine{1564   TINYOBJ\_FREE(shapes);}
\DoxyCodeLine{1565 \}}
\DoxyCodeLine{1566 }
\DoxyCodeLine{1567 \textcolor{keywordtype}{void} tinyobj\_materials\_free(\mbox{\hyperlink{structtinyobj__material__t}{tinyobj\_material\_t}} *materials,}
\DoxyCodeLine{1568                             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_materials) \{}
\DoxyCodeLine{1569   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{1570   \textcolor{keywordflow}{if} (materials == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1571 }
\DoxyCodeLine{1572   \textcolor{keywordflow}{for} (i = 0; i < num\_materials; i++) \{}
\DoxyCodeLine{1573     \textcolor{keywordflow}{if} (materials[i].name) TINYOBJ\_FREE(materials[i].name);}
\DoxyCodeLine{1574     \textcolor{keywordflow}{if} (materials[i].ambient\_texname) TINYOBJ\_FREE(materials[i].ambient\_texname);}
\DoxyCodeLine{1575     \textcolor{keywordflow}{if} (materials[i].diffuse\_texname) TINYOBJ\_FREE(materials[i].diffuse\_texname);}
\DoxyCodeLine{1576     \textcolor{keywordflow}{if} (materials[i].specular\_texname) TINYOBJ\_FREE(materials[i].specular\_texname);}
\DoxyCodeLine{1577     \textcolor{keywordflow}{if} (materials[i].specular\_highlight\_texname)}
\DoxyCodeLine{1578       TINYOBJ\_FREE(materials[i].specular\_highlight\_texname);}
\DoxyCodeLine{1579     \textcolor{keywordflow}{if} (materials[i].bump\_texname) TINYOBJ\_FREE(materials[i].bump\_texname);}
\DoxyCodeLine{1580     \textcolor{keywordflow}{if} (materials[i].displacement\_texname)}
\DoxyCodeLine{1581       TINYOBJ\_FREE(materials[i].displacement\_texname);}
\DoxyCodeLine{1582     \textcolor{keywordflow}{if} (materials[i].alpha\_texname) TINYOBJ\_FREE(materials[i].alpha\_texname);}
\DoxyCodeLine{1583   \}}
\DoxyCodeLine{1584 }
\DoxyCodeLine{1585   TINYOBJ\_FREE(materials);}
\DoxyCodeLine{1586 \}}
\DoxyCodeLine{1587 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* TINYOBJ\_LOADER\_C\_IMPLEMENTATION */}\textcolor{preprocessor}{}}
\DoxyCodeLine{1588 }
\DoxyCodeLine{1589 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* TINOBJ\_LOADER\_C\_H\_ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
