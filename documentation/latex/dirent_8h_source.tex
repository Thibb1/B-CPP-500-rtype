\hypertarget{dirent_8h_source}{}\doxysection{dirent.\+h}
\label{dirent_8h_source}\index{build/\_deps/raylib-\/src/src/external/dirent.h@{build/\_deps/raylib-\/src/src/external/dirent.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/****************************************************************************}}
\DoxyCodeLine{2 \textcolor{comment}{}}
\DoxyCodeLine{3 \textcolor{comment}{    Declaration of POSIX directory browsing functions and types for Win32.}}
\DoxyCodeLine{4 \textcolor{comment}{}}
\DoxyCodeLine{5 \textcolor{comment}{    Author:  Kevlin Henney (kevlin@acm.org, kevlin@curbralan.com)}}
\DoxyCodeLine{6 \textcolor{comment}{    History: Created March 1997. Updated June 2003.}}
\DoxyCodeLine{7 \textcolor{comment}{             Reviewed by Ramon Santamaria for raylib on January 2020.}}
\DoxyCodeLine{8 \textcolor{comment}{}}
\DoxyCodeLine{9 \textcolor{comment}{    Copyright Kevlin Henney, 1997, 2003. All rights reserved.}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{    Permission to use, copy, modify, and distribute this software and its}}
\DoxyCodeLine{12 \textcolor{comment}{    documentation for any purpose is hereby granted without fee, provided}}
\DoxyCodeLine{13 \textcolor{comment}{    that this copyright and permissions notice appear in all copies and}}
\DoxyCodeLine{14 \textcolor{comment}{    derivatives.}}
\DoxyCodeLine{15 \textcolor{comment}{    }}
\DoxyCodeLine{16 \textcolor{comment}{    This software is supplied "{}as is"{} without express or implied warranty.}}
\DoxyCodeLine{17 \textcolor{comment}{}}
\DoxyCodeLine{18 \textcolor{comment}{    But that said, if there are any problems please get in touch.}}
\DoxyCodeLine{19 \textcolor{comment}{}}
\DoxyCodeLine{20 \textcolor{comment}{****************************************************************************/}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#ifndef DIRENT\_H}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#define DIRENT\_H}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{comment}{// Allow custom memory allocators}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#ifndef DIRENT\_MALLOC}}
\DoxyCodeLine{27 \textcolor{preprocessor}{    \#define DIRENT\_MALLOC(sz)   malloc(sz)}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#ifndef DIRENT\_FREE}}
\DoxyCodeLine{30 \textcolor{preprocessor}{    \#define DIRENT\_FREE(p)      free(p)}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{34 \textcolor{comment}{// Types and Structures Definition}}
\DoxyCodeLine{35 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{comment}{// Fordward declaration of DIR, implementation below}}
\DoxyCodeLine{38 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structDIR}{DIR}} \mbox{\hyperlink{structDIR}{DIR}};}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{keyword}{struct }\mbox{\hyperlink{structdirent}{dirent}} \{}
\DoxyCodeLine{41     \textcolor{keywordtype}{char} *d\_name;}
\DoxyCodeLine{42 \};}
\DoxyCodeLine{43 }
\DoxyCodeLine{44 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{45 \textcolor{keyword}{extern} \textcolor{stringliteral}{"{}C"{}} \{}
\DoxyCodeLine{46 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{49 \textcolor{comment}{// Functions Declaration}}
\DoxyCodeLine{50 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{51 \mbox{\hyperlink{structDIR}{DIR}} *opendir(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *name);}
\DoxyCodeLine{52 \textcolor{keywordtype}{int} closedir(\mbox{\hyperlink{structDIR}{DIR}} *dir);}
\DoxyCodeLine{53 \textcolor{keyword}{struct }\mbox{\hyperlink{structdirent}{dirent}} *readdir(\mbox{\hyperlink{structDIR}{DIR}} *dir);}
\DoxyCodeLine{54 \textcolor{keywordtype}{void} rewinddir(\mbox{\hyperlink{structDIR}{DIR}} *dir);}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{57 \}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{preprocessor}{\#endif      }\textcolor{comment}{// DIRENT\_H}}
\DoxyCodeLine{61 }
\DoxyCodeLine{62 \textcolor{comment}{/****************************************************************************}}
\DoxyCodeLine{63 \textcolor{comment}{}}
\DoxyCodeLine{64 \textcolor{comment}{    Implementation of POSIX directory browsing functions and types for Win32.}}
\DoxyCodeLine{65 \textcolor{comment}{}}
\DoxyCodeLine{66 \textcolor{comment}{    Author:  Kevlin Henney (kevlin@acm.org, kevlin@curbralan.com)}}
\DoxyCodeLine{67 \textcolor{comment}{    History: Created March 1997. Updated June 2003.}}
\DoxyCodeLine{68 \textcolor{comment}{             Reviewed by Ramon Santamaria for raylib on January 2020.}}
\DoxyCodeLine{69 \textcolor{comment}{}}
\DoxyCodeLine{70 \textcolor{comment}{    Copyright Kevlin Henney, 1997, 2003. All rights reserved.}}
\DoxyCodeLine{71 \textcolor{comment}{}}
\DoxyCodeLine{72 \textcolor{comment}{    Permission to use, copy, modify, and distribute this software and its}}
\DoxyCodeLine{73 \textcolor{comment}{    documentation for any purpose is hereby granted without fee, provided}}
\DoxyCodeLine{74 \textcolor{comment}{    that this copyright and permissions notice appear in all copies and}}
\DoxyCodeLine{75 \textcolor{comment}{    derivatives.}}
\DoxyCodeLine{76 \textcolor{comment}{    }}
\DoxyCodeLine{77 \textcolor{comment}{    This software is supplied "{}as is"{} without express or implied warranty.}}
\DoxyCodeLine{78 \textcolor{comment}{}}
\DoxyCodeLine{79 \textcolor{comment}{    But that said, if there are any problems please get in touch.}}
\DoxyCodeLine{80 \textcolor{comment}{}}
\DoxyCodeLine{81 \textcolor{comment}{****************************************************************************/}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83 \textcolor{preprocessor}{\#include <io.h>}         \textcolor{comment}{// \_findfirst and \_findnext set errno iff they return -\/1}}
\DoxyCodeLine{84 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{85 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{86 \textcolor{preprocessor}{\#include <errno.h>}}
\DoxyCodeLine{87 }
\DoxyCodeLine{88 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{89 \textcolor{comment}{// Types and Structures Definition}}
\DoxyCodeLine{90 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{91 \textcolor{keyword}{typedef} ptrdiff\_t handle\_type;  \textcolor{comment}{// C99's intptr\_t not sufficiently portable}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93 \textcolor{keyword}{struct }\mbox{\hyperlink{structDIR}{DIR}} \{}
\DoxyCodeLine{94     handle\_type handle;         \textcolor{comment}{// -\/1 for failed rewind}}
\DoxyCodeLine{95     \textcolor{keyword}{struct }\_finddata\_t info;}
\DoxyCodeLine{96     \textcolor{keyword}{struct }\mbox{\hyperlink{structdirent}{dirent}} result;       \textcolor{comment}{// d\_name null iff first time}}
\DoxyCodeLine{97     \textcolor{keywordtype}{char} *name;                 \textcolor{comment}{// null-\/terminated char string}}
\DoxyCodeLine{98 \};}
\DoxyCodeLine{99 }
\DoxyCodeLine{100 \mbox{\hyperlink{structDIR}{DIR}} *opendir(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *name)}
\DoxyCodeLine{101 \{}
\DoxyCodeLine{102     \mbox{\hyperlink{structDIR}{DIR}} *dir = 0;}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     \textcolor{keywordflow}{if} (name \&\& name[0])}
\DoxyCodeLine{105     \{}
\DoxyCodeLine{106         \textcolor{keywordtype}{size\_t} base\_length = strlen(name);}
\DoxyCodeLine{107         }
\DoxyCodeLine{108         \textcolor{comment}{// Search pattern must end with suitable wildcard}}
\DoxyCodeLine{109         \textcolor{keyword}{const} \textcolor{keywordtype}{char} *all = strchr(\textcolor{stringliteral}{"{}/\(\backslash\)\(\backslash\)"{}}, name[base\_length -\/ 1]) ? \textcolor{stringliteral}{"{}*"{}} : \textcolor{stringliteral}{"{}/*"{}};}
\DoxyCodeLine{110 }
\DoxyCodeLine{111         \textcolor{keywordflow}{if} ((dir = (\mbox{\hyperlink{structDIR}{DIR}} *)DIRENT\_MALLOC(\textcolor{keyword}{sizeof} *dir)) != 0 \&\&}
\DoxyCodeLine{112             (dir-\/>name = (\textcolor{keywordtype}{char} *)DIRENT\_MALLOC(base\_length + strlen(all) + 1)) != 0)}
\DoxyCodeLine{113         \{}
\DoxyCodeLine{114             strcat(strcpy(dir-\/>name, name), all);}
\DoxyCodeLine{115 }
\DoxyCodeLine{116             \textcolor{keywordflow}{if} ((dir-\/>handle = (handle\_type) \_findfirst(dir-\/>name, \&dir-\/>info)) != -\/1)}
\DoxyCodeLine{117             \{}
\DoxyCodeLine{118                 dir-\/>result.d\_name = 0;}
\DoxyCodeLine{119             \}}
\DoxyCodeLine{120             \textcolor{keywordflow}{else}  \textcolor{comment}{// rollback}}
\DoxyCodeLine{121             \{}
\DoxyCodeLine{122                 DIRENT\_FREE(dir-\/>name);}
\DoxyCodeLine{123                 DIRENT\_FREE(dir);}
\DoxyCodeLine{124                 dir = 0;}
\DoxyCodeLine{125             \}}
\DoxyCodeLine{126         \}}
\DoxyCodeLine{127         \textcolor{keywordflow}{else}  \textcolor{comment}{// rollback}}
\DoxyCodeLine{128         \{}
\DoxyCodeLine{129             DIRENT\_FREE(dir);}
\DoxyCodeLine{130             dir   = 0;}
\DoxyCodeLine{131             errno = ENOMEM;}
\DoxyCodeLine{132         \}}
\DoxyCodeLine{133     \}}
\DoxyCodeLine{134     \textcolor{keywordflow}{else} errno = EINVAL;}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \textcolor{keywordflow}{return} dir;}
\DoxyCodeLine{137 \}}
\DoxyCodeLine{138 }
\DoxyCodeLine{139 \textcolor{keywordtype}{int} closedir(\mbox{\hyperlink{structDIR}{DIR}} *dir)}
\DoxyCodeLine{140 \{}
\DoxyCodeLine{141     \textcolor{keywordtype}{int} result = -\/1;}
\DoxyCodeLine{142 }
\DoxyCodeLine{143     \textcolor{keywordflow}{if} (dir)}
\DoxyCodeLine{144     \{}
\DoxyCodeLine{145         \textcolor{keywordflow}{if} (dir-\/>handle != -\/1) result = \_findclose(dir-\/>handle);}
\DoxyCodeLine{146 }
\DoxyCodeLine{147         DIRENT\_FREE(dir-\/>name);}
\DoxyCodeLine{148         DIRENT\_FREE(dir);}
\DoxyCodeLine{149     \}}
\DoxyCodeLine{150 }
\DoxyCodeLine{151     \textcolor{comment}{// NOTE: All errors ampped to EBADF}}
\DoxyCodeLine{152     \textcolor{keywordflow}{if} (result == -\/1) errno = EBADF;}
\DoxyCodeLine{153 }
\DoxyCodeLine{154     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{155 \}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 \textcolor{keyword}{struct }\mbox{\hyperlink{structdirent}{dirent}} *readdir(\mbox{\hyperlink{structDIR}{DIR}} *dir)}
\DoxyCodeLine{158 \{}
\DoxyCodeLine{159     \textcolor{keyword}{struct }\mbox{\hyperlink{structdirent}{dirent}} *result = 0;}
\DoxyCodeLine{160 }
\DoxyCodeLine{161     \textcolor{keywordflow}{if} (dir \&\& dir-\/>handle != -\/1)}
\DoxyCodeLine{162     \{}
\DoxyCodeLine{163         \textcolor{keywordflow}{if} (!dir-\/>result.d\_name || \_findnext(dir-\/>handle, \&dir-\/>info) != -\/1)}
\DoxyCodeLine{164         \{}
\DoxyCodeLine{165             result = \&dir-\/>result;}
\DoxyCodeLine{166             result-\/>d\_name = dir-\/>info.name;}
\DoxyCodeLine{167         \}}
\DoxyCodeLine{168     \}}
\DoxyCodeLine{169     \textcolor{keywordflow}{else} errno = EBADF;}
\DoxyCodeLine{170 }
\DoxyCodeLine{171     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{172 \}}
\DoxyCodeLine{173 }
\DoxyCodeLine{174 \textcolor{keywordtype}{void} rewinddir(\mbox{\hyperlink{structDIR}{DIR}} *dir)}
\DoxyCodeLine{175 \{}
\DoxyCodeLine{176     \textcolor{keywordflow}{if} (dir \&\& dir-\/>handle != -\/1)}
\DoxyCodeLine{177     \{}
\DoxyCodeLine{178         \_findclose(dir-\/>handle);}
\DoxyCodeLine{179         dir-\/>handle = (handle\_type) \_findfirst(dir-\/>name, \&dir-\/>info);}
\DoxyCodeLine{180         dir-\/>result.d\_name = 0;}
\DoxyCodeLine{181     \}}
\DoxyCodeLine{182     \textcolor{keywordflow}{else} errno = EBADF;}
\DoxyCodeLine{183 \}}

\end{DoxyCode}
